(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{535:function(s,n,e){"use strict";e.r(n);var a=e(7),t=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("code",[s._v("known_hosts")]),s._v(" 文件的具体示例与功能解析"),n("br"),s._v(" "),n("code",[s._v("known_hosts")]),s._v(" 文件是 SSH 协议中用于验证远程主机身份的核心文件，以下通过具体场景和示例说明其作用及操作方式：")]),s._v(" "),n("hr"),s._v(" "),n("p",[n("strong",[s._v("1. 文件结构与条目示例")]),n("br"),s._v(" "),n("code",[s._v("known_hosts")]),s._v(" 文件中的每一条目记录一个远程主机的公钥信息，格式为：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[主机名/IP地址] [公钥算法类型] [公钥字符串]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("示例（来自实际场景）：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("example.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC9...（省略长字符串）\n172.16.10.6 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTI...（省略长字符串）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("说明："),n("br"),s._v("\n• 主机名/IP地址：标识远程主机的访问入口（如 "),n("code",[s._v("example.com")]),s._v(" 或 "),n("code",[s._v("172.16.10.6")]),s._v("）。")]),s._v(" "),n("p",[s._v("• 公钥算法类型：如 "),n("code",[s._v("ssh-rsa")]),s._v("（RSA 算法）、"),n("code",[s._v("ecdsa-sha2-nistp256")]),s._v("（椭圆曲线算法）。")]),s._v(" "),n("p",[s._v("• 公钥字符串：远程主机的公钥指纹，用于身份校验（长度通常超过 100 字符）。")]),s._v(" "),n("hr"),s._v(" "),n("p",[n("strong",[s._v("2. 首次连接时的自动生成示例")]),n("br"),s._v("\n当用户首次通过 SSH 连接到一个新主机时，系统会提示确认并自动生成条目：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" user@example.com\nThe authenticity of "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example.com (93.184.216.34)'")]),s._v(" can't be established.\nECDSA key fingerprint is SHA256:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".（指纹信息）\nAre you sure you want to "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" connecting "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("yes/no/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fingerprint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("? "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("结果："),n("br"),s._v("\n• 用户输入 "),n("code",[s._v("yes")]),s._v(" 后，远程主机的公钥会自动写入 "),n("code",[s._v("~/.ssh/known_hosts")]),s._v(" 文件。")]),s._v(" "),n("p",[s._v("• 后续连接时，SSH 客户端会直接对比公钥，不再提示确认。")]),s._v(" "),n("hr"),s._v(" "),n("p",[n("strong",[s._v("3. 公钥变更的冲突处理示例")]),n("br"),s._v("\n若远程主机的公钥发生变化（如服务器重装系统），再次连接时会触发安全警告：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nWARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!\nPossible DNS Spoofing or Host Key Change Detected!\nOffending key in ~/.ssh/known_hosts:1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("解决方法：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("删除旧条目："),n("br"),s._v("\n• 命令行方式："),n("code",[s._v("ssh-keygen -R example.com")]),s._v("（自动删除相关条目）。")]),s._v(" "),n("p",[s._v("• 手动编辑：用文本编辑器打开 "),n("code",[s._v("known_hosts")]),s._v("，删除对应行。")])]),s._v(" "),n("li",[n("p",[s._v("重新连接：再次执行 "),n("code",[s._v("ssh user@example.com")]),s._v("，接受新公钥并更新文件。")])])]),s._v(" "),n("hr"),s._v(" "),n("p",[n("strong",[s._v("4. 手动管理条目的场景示例")]),n("br"),s._v("\n在自动化脚本或批量部署中，可能需要手动添加公钥以避免交互式提示：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 ssh-keyscan 扫描远程主机公钥并追加到文件")]),s._v("\nssh-keyscan "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" example.com "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.ssh/known_hosts\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("结果："),n("br"),s._v("\n• 文件末尾新增条目，格式与自动生成的条目一致。")]),s._v(" "),n("p",[s._v("• 适用于需要预先配置信任主机的场景（如 Ansible 批量管理）。")]),s._v(" "),n("hr"),s._v(" "),n("p",[n("strong",[s._v("5. 跨系统路径示例")]),n("br"),s._v("\n• Linux/macOS："),n("code",[s._v("~/.ssh/known_hosts")])]),s._v(" "),n("p",[s._v("• Windows："),n("code",[s._v("%USERPROFILE%\\.ssh\\known_hosts")])]),s._v(" "),n("hr"),s._v(" "),n("p",[n("strong",[s._v("总结")]),n("br"),s._v(" "),n("code",[s._v("known_hosts")]),s._v(" 文件通过存储远程主机的公钥实现身份验证，是 SSH 安全机制的重要组成部分。通过具体示例可见：")]),s._v(" "),n("ol",[n("li",[s._v("首次连接自动记录：用户确认后生成条目。")]),s._v(" "),n("li",[s._v("公钥变更告警：强制用户核实变更的合法性。")]),s._v(" "),n("li",[s._v("灵活管理方式：支持命令行工具（如 "),n("code",[s._v("ssh-keygen")]),s._v("）和手动编辑。"),n("br"),s._v("\n理解其运作逻辑，可有效提升 SSH 连接的安全性和运维效率。")])])])}),[],!1,null,null,null);n.default=t.exports}}]);