(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{408:function(s,t,v){"use strict";v.r(t);var _=v(7),a=Object(_.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("在 MySQL 中，"),t("code",[s._v("localhost")]),s._v(" 和 "),t("code",[s._v("127.0.0.1")]),s._v(" 虽然都指向本机，但在协议、权限管理、连接方式等方面存在显著区别。以下是具体分析：")]),s._v(" "),t("hr"),s._v(" "),t("p",[t("strong",[s._v("一、协议与连接方式的区别")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("连接协议不同"),t("br"),s._v("\n• "),t("code",[s._v("localhost")]),s._v("：默认使用 Unix Socket（类 Unix 系统）或命名管道（Windows）连接。这种连接方式不经过网卡，直接通过操作系统内核通信，不受网络防火墙限制，速度更快。")]),s._v(" "),t("p",[s._v("• "),t("code",[s._v("127.0.0.1")]),s._v("：强制使用 TCP/IP 协议，通过网卡传输，依赖网络配置，可能受防火墙或网络策略影响。")]),s._v(" "),t("p",[s._v("示例验证：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 通过localhost连接")]),s._v("\nmysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 状态显示：Connection: Localhost via UNIX socket")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 通过127.0.0.1连接")]),s._v("\nmysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 状态显示：Connection: 127.0.0.1 via TCP/IP")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("网络传输路径"),t("br"),s._v("\n• "),t("code",[s._v("localhost")]),s._v(" 的通信完全在操作系统内部完成，不经过物理或虚拟网卡。")]),s._v(" "),t("p",[s._v("• "),t("code",[s._v("127.0.0.1")]),s._v(" 虽然指向本机，但数据包仍需通过网卡的回环接口（loopback interface）处理。")])])]),s._v(" "),t("hr"),s._v(" "),t("p",[t("strong",[s._v("二、权限管理的区别")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("用户权限独立"),t("br"),s._v("\n在 MySQL 中，用户由 "),t("code",[s._v("用户名@主机")]),s._v(" 组成，因此："),t("br"),s._v("\n• "),t("code",[s._v("'user'@'localhost'")]),s._v(" 和 "),t("code",[s._v("'user'@'127.0.0.1'")]),s._v(" 是两个独立的用户，需分别授权。")]),s._v(" "),t("p",[s._v("• 即使密码相同，若未显式授权 "),t("code",[s._v("127.0.0.1")]),s._v("，可能导致连接失败。")]),s._v(" "),t("p",[s._v("验证方法：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Host "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 结果可能包含两行：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+-----------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("User")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Host      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+-----------+")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------+-----------+")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("权限匹配优先级"),t("br"),s._v("\nMySQL 按以下顺序匹配权限：")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("'user'@'localhost'")])]),s._v(" "),t("li",[t("code",[s._v("'user'@'127.0.0.1'")])]),s._v(" "),t("li",[t("code",[s._v("'user'@'%'")]),s._v("（通配符主机）"),t("br"),s._v("\n若 "),t("code",[s._v("localhost")]),s._v(" 用户存在，优先匹配，可能忽略 "),t("code",[s._v("127.0.0.1")]),s._v(" 的权限。")])])])]),s._v(" "),t("hr"),s._v(" "),t("p",[t("strong",[s._v("三、应用场景与常见问题")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("开发环境问题"),t("br"),s._v("\n• PHP/Web 连接失败：使用 "),t("code",[s._v("localhost")]),s._v(" 时，若 PHP 未正确配置 Unix Socket 路径（如 "),t("code",[s._v("/var/run/mysqld/mysqld.sock")]),s._v("），会导致连接失败。改用 "),t("code",[s._v("127.0.0.1")]),s._v(" 强制 TCP/IP 可解决。")]),s._v(" "),t("p",[s._v("• 跨域问题（CORS）：浏览器认为 "),t("code",[s._v("localhost")]),s._v(" 和 "),t("code",[s._v("127.0.0.1")]),s._v(" 是不同源，需统一前后端使用的地址。")])]),s._v(" "),t("li",[t("p",[s._v("服务监听配置"),t("br"),s._v("\n• 若服务仅监听 "),t("code",[s._v("localhost")]),s._v("，外部无法通过 "),t("code",[s._v("127.0.0.1")]),s._v(" 或公网 IP 访问。需改为 "),t("code",[s._v("0.0.0.0")]),s._v(" 以接受所有来源。")])]),s._v(" "),t("li",[t("p",[s._v("IPv6 兼容性"),t("br"),s._v("\n• "),t("code",[s._v("localhost")]),s._v(" 在 IPv6 中解析为 "),t("code",[s._v("::1")]),s._v("，而 "),t("code",[s._v("127.0.0.1")]),s._v(" 仅适用于 IPv4。若系统启用 IPv6，需显式配置兼容性。")])])]),s._v(" "),t("hr"),s._v(" "),t("p",[t("strong",[s._v("四、性能与安全性")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("性能差异"),t("br"),s._v("\n• Unix Socket 比 TCP/IP 更快，因省去了协议栈封装和网络层处理。")]),s._v(" "),t("p",[s._v("• "),t("code",[s._v("127.0.0.1")]),s._v(" 需经过完整的 TCP 握手过程，适合需要模拟网络环境的场景。")])]),s._v(" "),t("li",[t("p",[s._v("安全限制"),t("br"),s._v("\n• "),t("code",[s._v("localhost")]),s._v(" 连接不受网络防火墙限制，但依赖操作系统权限。")]),s._v(" "),t("p",[s._v("• "),t("code",[s._v("127.0.0.1")]),s._v(" 可能受防火墙规则拦截（如关闭 3306 端口）。")])])]),s._v(" "),t("hr"),s._v(" "),t("p",[t("strong",[s._v("五、总结与建议")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("对比项")]),s._v(" "),t("th",[t("code",[s._v("localhost")])]),s._v(" "),t("th",[t("code",[s._v("127.0.0.1")])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("协议")]),s._v(" "),t("td",[s._v("Unix Socket/命名管道")]),s._v(" "),t("td",[s._v("TCP/IP")])]),s._v(" "),t("tr",[t("td",[s._v("权限独立性")]),s._v(" "),t("td",[s._v("独立用户（需单独授权）")]),s._v(" "),t("td",[s._v("独立用户（需单独授权）")])]),s._v(" "),t("tr",[t("td",[s._v("网络传输")]),s._v(" "),t("td",[s._v("不经过网卡")]),s._v(" "),t("td",[s._v("经过网卡回环接口")])]),s._v(" "),t("tr",[t("td",[s._v("防火墙影响")]),s._v(" "),t("td",[s._v("不受限制")]),s._v(" "),t("td",[s._v("可能被拦截")])]),s._v(" "),t("tr",[t("td",[s._v("适用场景")]),s._v(" "),t("td",[s._v("本地开发、高性能需求")]),s._v(" "),t("td",[s._v("模拟网络环境、跨主机测试")])])])]),s._v(" "),t("p",[s._v("建议：")]),s._v(" "),t("ol",[t("li",[s._v("本地开发优先使用 "),t("code",[s._v("localhost")]),s._v(" 以提升性能。")]),s._v(" "),t("li",[s._v("统一权限配置时，同时创建 "),t("code",[s._v("'user'@'localhost'")]),s._v(" 和 "),t("code",[s._v("'user'@'127.0.0.1'")]),s._v("。")]),s._v(" "),t("li",[s._v("遇到连接问题时，检查防火墙、MySQL 配置（如 "),t("code",[s._v("skip_name_resolve")]),s._v("）和用户权限。")])])])}),[],!1,null,null,null);t.default=a.exports}}]);