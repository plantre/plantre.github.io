(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{430:function(_,v,t){"use strict";t.r(v);var s=t(7),r=Object(s.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("p",[_._v("以下是主流分布式组件搭建高可用集群的最小节点要求及企业生产环境推荐配置，结合容错能力、资源成本和性能需求综合分析：")]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"🧩-一、协调与配置服务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#🧩-一、协调与配置服务"}},[_._v("#")]),_._v(" 🧩 一、协调与配置服务")]),_._v(" "),v("ol",[v("li",[v("p",[v("strong",[_._v("ZooKeeper")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("最小高可用节点")]),_._v("：3节点（容忍1节点故障）")]),_._v(" "),v("li",[v("strong",[_._v("生产推荐")]),_._v("：3节点（中小规模）、5节点（中大规模）")]),_._v(" "),v("li",[v("strong",[_._v("关键机制")]),_._v("：基于ZAB协议的过半原则（Quorum），3节点可容忍1节点宕机，5节点可容忍2节点宕机。")]),_._v(" "),v("li",[v("strong",[_._v("避坑指南")]),_._v("："),v("strong",[_._v("必须奇数节点")]),_._v("（偶数节点可能因脑裂导致集群不可用）。")])])]),_._v(" "),v("li",[v("p",[v("strong",[_._v("Nacos")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("最小高可用节点")]),_._v("：3节点（CP模式依赖Raft算法）")]),_._v(" "),v("li",[v("strong",[_._v("生产推荐")]),_._v("：3节点（标准配置）、5节点（跨机房部署）")]),_._v(" "),v("li",[v("strong",[_._v("模式选择")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("CP模式")]),_._v("：Raft协议要求3节点保证强一致性。")]),_._v(" "),v("li",[v("strong",[_._v("AP模式")]),_._v("：Distro协议（Gossip变种）支持2节点但生产必须3节点（防脑裂）。")])])])])]),_._v(" "),v("li",[v("p",[v("strong",[_._v("Consul")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("最小高可用节点")]),_._v("：3节点（Raft算法要求）")]),_._v(" "),v("li",[v("strong",[_._v("生产推荐")]),_._v("：3节点（单数据中心）、5+节点（多数据中心）")]),_._v(" "),v("li",[v("strong",[_._v("特性")]),_._v("：通过WAN Gossip同步跨数据中心状态。")])])])]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"📨-二、消息与数据中间件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#📨-二、消息与数据中间件"}},[_._v("#")]),_._v(" 📨 二、消息与数据中间件")]),_._v(" "),v("ol",[v("li",[v("p",[v("strong",[_._v("Kafka")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("最小高可用节点")]),_._v("：3节点（需配合副本因子3）")]),_._v(" "),v("li",[v("strong",[_._v("生产推荐")]),_._v("：3节点（测试/中小流量）、5-7节点（高并发场景）")]),_._v(" "),v("li",[v("strong",[_._v("核心机制")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("ISR副本同步")]),_._v("：副本因子≥3时，容忍1节点故障。")]),_._v(" "),v("li",[v("strong",[_._v("分区分配")]),_._v("：节点数需≥最大副本数（如副本因子3则至少3节点）。")])])])])]),_._v(" "),v("li",[v("p",[v("strong",[_._v("Redis Cluster")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("最小高可用节点")]),_._v("：6节点（3主3从）")]),_._v(" "),v("li",[v("strong",[_._v("生产推荐")]),_._v("：6节点（标准配置）、12+节点（大数据量）")]),_._v(" "),v("li",[v("strong",[_._v("分区原理")]),_._v("：16384槽位均分至主节点，从节点提供故障转移。")])])])]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"🔍-三、搜索与分析引擎"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#🔍-三、搜索与分析引擎"}},[_._v("#")]),_._v(" 🔍 三、搜索与分析引擎")]),_._v(" "),v("p",[v("strong",[_._v("Elasticsearch")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("最小高可用节点")]),_._v("：3节点（含专用主节点）")]),_._v(" "),v("li",[v("strong",[_._v("生产推荐")]),_._v("：\n"),v("ul",[v("li",[_._v("轻负载：3节点（混合角色）")]),_._v(" "),v("li",[_._v("重负载：3专用主节点 + 多个数据节点")])])]),_._v(" "),v("li",[v("strong",[_._v("防脑裂配置")]),_._v("："),v("br"),_._v(" "),v("code",[_._v("discovery.zen.minimum_master_nodes = N/2+1")]),_._v("（N为主节点数）。")])]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"📊-四、节点配置总结表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#📊-四、节点配置总结表"}},[_._v("#")]),_._v(" 📊 四、节点配置总结表")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("组件")])]),_._v(" "),v("th",[v("strong",[_._v("最小高可用节点")])]),_._v(" "),v("th",[v("strong",[_._v("生产推荐节点数")])]),_._v(" "),v("th",[v("strong",[_._v("部署要点")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[_._v("ZooKeeper")])]),_._v(" "),v("td",[_._v("3")]),_._v(" "),v("td",[_._v("3（中小）、5（大型）")]),_._v(" "),v("td",[_._v("奇数节点防脑裂")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Nacos")])]),_._v(" "),v("td",[_._v("3")]),_._v(" "),v("td",[_._v("3-5")]),_._v(" "),v("td",[_._v("CP模式必选3节点")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Consul")])]),_._v(" "),v("td",[_._v("3")]),_._v(" "),v("td",[_._v("3-5")]),_._v(" "),v("td",[_._v("多数据中心需增加节点")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Kafka")])]),_._v(" "),v("td",[_._v("3")]),_._v(" "),v("td",[_._v("3-7")]),_._v(" "),v("td",[_._v("副本因子=节点数")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Redis Cluster")])]),_._v(" "),v("td",[_._v("6（3主3从）")]),_._v(" "),v("td",[_._v("6+")]),_._v(" "),v("td",[_._v("主从1:1，槽位均分")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Elasticsearch")])]),_._v(" "),v("td",[_._v("3")]),_._v(" "),v("td",[_._v("3专用主节点+N数据节点")]),_._v(" "),v("td",[_._v("主节点配置 "),v("code",[_._v("minimum_master_nodes")])])])])]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"⚠️-五、企业生产环境通用原则"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-五、企业生产环境通用原则"}},[_._v("#")]),_._v(" ⚠️ 五、企业生产环境通用原则")]),_._v(" "),v("ol",[v("li",[v("p",[v("strong",[_._v("容错与成本平衡")])]),_._v(" "),v("ul",[v("li",[_._v("所有组件均遵循 "),v("strong",[_._v("2N+1原则")]),_._v("：容忍N节点故障至少需2N+1节点（如容忍1故障需3节点）。")]),_._v(" "),v("li",[_._v("偶数节点不推荐：可能因网络分区导致脑裂（如4节点集群需3节点存活，容错能力与3节点相同但成本更高）。")])])]),_._v(" "),v("li",[v("p",[v("strong",[_._v("性能扩展建议")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("轻量级系统")]),_._v("：3节点满足基本高可用（如ZooKeeper/Nacos测试环境）。")]),_._v(" "),v("li",[v("strong",[_._v("高并发场景")]),_._v("：\n"),v("ul",[v("li",[_._v("Kafka按吞吐量扩容（每节点支撑20-50MB/s）")]),_._v(" "),v("li",[_._v("ES数据节点按索引分片数线性扩展（建议单分片≤50GB）。")])])])])]),_._v(" "),v("li",[v("p",[v("strong",[_._v("特殊角色隔离")])]),_._v(" "),v("ul",[v("li",[_._v("ES分离专用主节点与数据节点（防资源竞争）")]),_._v(" "),v("li",[_._v("Redis主从节点分散在不同物理机（避免主从同机宕机）。")])])])]),_._v(" "),v("blockquote",[v("p",[_._v("注：实际部署需结合网络架构（如跨机房部署需增加节点数）、硬件资源及业务SLA综合设计。")])])])}),[],!1,null,null,null);v.default=r.exports}}]);