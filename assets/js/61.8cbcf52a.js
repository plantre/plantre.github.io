(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{418:function(v,_,t){"use strict";t.r(_);var r=t(7),s=Object(r.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("p",[v._v("Redis的“3主3从集群模式”与“哨兵模式”是两种不同的高可用架构设计，核心差异在于"),_("strong",[v._v("数据分布方式")]),v._v("和"),_("strong",[v._v("故障转移机制")]),v._v("。以下从5个维度详解两者的区别：")]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"📊-一、架构设计对比"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#📊-一、架构设计对比"}},[v._v("#")]),v._v(" 📊 "),_("strong",[v._v("一、架构设计对比")])]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[_("strong",[v._v("特性")])]),v._v(" "),_("th",[_("strong",[v._v("3主3从集群模式")])]),v._v(" "),_("th",[_("strong",[v._v("哨兵模式")])])])]),v._v(" "),_("tbody",[_("tr",[_("td",[_("strong",[v._v("数据分布")])]),v._v(" "),_("td",[v._v("数据分片存储（16384个槽）")]),v._v(" "),_("td",[v._v("所有节点存储全量数据（无分片）")])]),v._v(" "),_("tr",[_("td",[_("strong",[v._v("节点角色")])]),v._v(" "),_("td",[v._v("每个主节点管理部分槽，从节点做备份")]),v._v(" "),_("td",[v._v("一主多从，主节点负责所有写操作")])]),v._v(" "),_("tr",[_("td",[_("strong",[v._v("扩展性")])]),v._v(" "),_("td",[v._v("支持水平扩展（增加分片）")]),v._v(" "),_("td",[v._v("仅支持垂直扩展（提升单节点性能）")])])])]),v._v(" "),_("blockquote",[_("p",[_("strong",[v._v("示例架构")]),v._v("：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("集群模式")]),v._v("：3个主节点各管理5461个哈希槽，每个主节点配1个从节点（共6节点）。")]),v._v(" "),_("li",[_("strong",[v._v("哨兵模式")]),v._v("：1个主节点 + 2个从节点 + 3个哨兵节点（独立进程）。")])])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"⚙️-二、故障转移机制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#⚙️-二、故障转移机制"}},[v._v("#")]),v._v(" ⚙️ "),_("strong",[v._v("二、故障转移机制")])]),v._v(" "),_("h4",{attrs:{id:"集群模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#集群模式"}},[v._v("#")]),v._v(" "),_("strong",[v._v("集群模式")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("局部故障转移")]),v._v("：单个主节点宕机时，其从节点自动升主，其他分片不受影响。")]),v._v(" "),_("li",[_("strong",[v._v("无需额外组件")]),v._v("：故障转移由集群内部通过Gossip协议协商完成。")]),v._v(" "),_("li",[_("strong",[v._v("切换时间")]),v._v("：默认15秒（"),_("code",[v._v("cluster-node-timeout")]),v._v("参数控制）。")])]),v._v(" "),_("h4",{attrs:{id:"哨兵模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#哨兵模式"}},[v._v("#")]),v._v(" "),_("strong",[v._v("哨兵模式")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("全局故障转移")]),v._v("：主节点宕机后，哨兵选举新主节点，切换所有从节点指向新主。")]),v._v(" "),_("li",[_("strong",[v._v("依赖哨兵节点")]),v._v("：需独立部署哨兵集群（至少3节点）监控和决策。")]),v._v(" "),_("li",[_("strong",[v._v("切换流程")]),v._v("：\n"),_("ol",[_("li",[v._v("主观下线（SDOWN）：单个哨兵检测主节点失联。")]),v._v(" "),_("li",[v._v("客观下线（ODOWN）：多数哨兵确认主节点故障。")]),v._v(" "),_("li",[v._v("选举领导者哨兵，执行故障转移。")])])])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"📈-三、性能与扩展性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#📈-三、性能与扩展性"}},[v._v("#")]),v._v(" 📈 "),_("strong",[v._v("三、性能与扩展性")])]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[_("strong",[v._v("场景")])]),v._v(" "),_("th",[_("strong",[v._v("集群模式")])]),v._v(" "),_("th",[_("strong",[v._v("哨兵模式")])])])]),v._v(" "),_("tbody",[_("tr",[_("td",[_("strong",[v._v("写入性能")])]),v._v(" "),_("td",[v._v("并发写入多个分片（支持高并发）")]),v._v(" "),_("td",[v._v("所有写操作集中在单主节点")])]),v._v(" "),_("tr",[_("td",[_("strong",[v._v("内存利用率")])]),v._v(" "),_("td",[v._v("数据分片存储，无冗余")]),v._v(" "),_("td",[v._v("所有节点全量数据，内存利用率低")])]),v._v(" "),_("tr",[_("td",[_("strong",[v._v("扩容成本")])]),v._v(" "),_("td",[v._v("动态增删节点，自动重分配槽")]),v._v(" "),_("td",[v._v("需停机修改配置，复杂度高")])])])]),v._v(" "),_("blockquote",[_("p",[_("strong",[v._v("案例")]),v._v("："),_("br"),v._v("\n10GB数据写入时，集群模式可将数据分散到3个主节点（每个约3.3GB），而哨兵模式需单节点承担全部写入压力。")])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"⚠️-四、使用限制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-四、使用限制"}},[v._v("#")]),v._v(" ⚠️ "),_("strong",[v._v("四、使用限制")])]),v._v(" "),_("h4",{attrs:{id:"集群模式-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#集群模式-2"}},[v._v("#")]),v._v(" "),_("strong",[v._v("集群模式")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("多键操作限制")]),v._v("：需确保所有key在同一分片（相同哈希槽），否则报错。")]),v._v(" "),_("li",[_("strong",[v._v("事务支持")]),v._v("：仅支持同一分片内的事务。")]),v._v(" "),_("li",[_("strong",[v._v("客户端兼容性")]),v._v("：需支持重定向（如"),_("code",[v._v("-MOVED")]),v._v("响应）。")])]),v._v(" "),_("h4",{attrs:{id:"哨兵模式-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#哨兵模式-2"}},[v._v("#")]),v._v(" "),_("strong",[v._v("哨兵模式")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("数据一致性风险")]),v._v("：主从切换期间可能丢失部分异步复制的数据。")]),v._v(" "),_("li",[_("strong",[v._v("配置复杂度")]),v._v("：需维护哨兵集群的配置和状态。")])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"🏷️-五、适用场景总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#🏷️-五、适用场景总结"}},[v._v("#")]),v._v(" 🏷️ "),_("strong",[v._v("五、适用场景总结")])]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[_("strong",[v._v("场景")])]),v._v(" "),_("th",[_("strong",[v._v("推荐模式")])]),v._v(" "),_("th",[_("strong",[v._v("原因")])])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("海量数据+高并发（如电商平台）")]),v._v(" "),_("td",[v._v("3主3从集群模式")]),v._v(" "),_("td",[v._v("分片提升并发能力，水平扩展支持业务增长")])]),v._v(" "),_("tr",[_("td",[v._v("中小规模+高可用需求（如配置中心）")]),v._v(" "),_("td",[v._v("哨兵模式")]),v._v(" "),_("td",[v._v("自动故障转移，配置简单")])]),v._v(" "),_("tr",[_("td",[v._v("读写分离场景")]),v._v(" "),_("td",[v._v("哨兵模式")]),v._v(" "),_("td",[v._v("从节点分担读负载，主节点专注写操作")])]),v._v(" "),_("tr",[_("td",[v._v("多键事务操作")]),v._v(" "),_("td",[v._v("哨兵模式")]),v._v(" "),_("td",[v._v("无分片限制，支持跨key事务")])])])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"💎-总结-核心差异一句话"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#💎-总结-核心差异一句话"}},[v._v("#")]),v._v(" 💎 "),_("strong",[v._v("总结：核心差异一句话")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("集群模式")]),v._v("：解决"),_("strong",[v._v("数据分片")]),v._v("与"),_("strong",[v._v("分布式高可用")]),v._v("，适合大规模、高并发场景。")]),v._v(" "),_("li",[_("strong",[v._v("哨兵模式")]),v._v("：解决"),_("strong",[v._v("主从自动切换")]),v._v("问题，适合中小规模单一数据集的高可用需求。")])]),v._v(" "),_("blockquote",[_("p",[v._v("⚠️ "),_("strong",[v._v("特别注意")]),v._v("：集群模式本身集成故障转移能力，无需额外部署哨兵。若在集群上叠加哨兵，反而增加架构复杂度！")])])])}),[],!1,null,null,null);_.default=s.exports}}]);