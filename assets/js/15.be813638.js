(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{372:function(t,s,v){"use strict";v.r(s);var _=v(7),a=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("UNIX Socket（UNIX域套接字）与TCP/IP Socket（网络套接字）是两种不同的通信机制，核心区别在于通信范围、协议开销、性能特性及应用场景。以下是具体对比：")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("一、通信范围与地址形式")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("特性")]),t._v(" "),s("th",[t._v("UNIX Socket")]),t._v(" "),s("th",[t._v("TCP/IP Socket")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("通信范围")]),t._v(" "),s("td",[t._v("同一主机内的进程间通信（IPC）")]),t._v(" "),s("td",[t._v("跨网络通信，支持不同主机间的通信")])]),t._v(" "),s("tr",[s("td",[t._v("地址形式")]),t._v(" "),s("td",[t._v("文件路径（如 "),s("code",[t._v("/var/run/mysql.sock")]),t._v("）")]),t._v(" "),s("td",[t._v("IP地址+端口（如 "),s("code",[t._v("127.0.0.1:3306")]),t._v("）")])]),t._v(" "),s("tr",[s("td",[t._v("协议族")]),t._v(" "),s("td",[s("code",[t._v("AF_UNIX")]),t._v("（基于文件系统）")]),t._v(" "),s("td",[s("code",[t._v("AF_INET")]),t._v("（IPv4）或 "),s("code",[t._v("AF_INET6")]),t._v("（IPv6）")])])])]),t._v(" "),s("p",[t._v("关键区别："),s("br"),t._v("\n• UNIX Socket通过文件路径标识通信端点，仅限本地进程访问，天然隔离网络攻击；")]),t._v(" "),s("p",[t._v("• TCP/IP Socket依赖IP和端口，需处理网络路由和跨主机寻址。")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("二、性能与协议开销")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("特性")]),t._v(" "),s("th",[t._v("UNIX Socket")]),t._v(" "),s("th",[t._v("TCP/IP Socket")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("协议开销")]),t._v(" "),s("td",[t._v("无网络协议栈处理（无TCP握手、无IP封装）")]),t._v(" "),s("td",[t._v("需处理TCP三次握手、流量控制、重传等机制")])]),t._v(" "),s("tr",[s("td",[t._v("传输速度")]),t._v(" "),s("td",[t._v("比TCP快2倍以上（实测）")]),t._v(" "),s("td",[t._v("受网络延迟、带宽和拥塞控制影响")])]),t._v(" "),s("tr",[s("td",[t._v("数据边界保留")]),t._v(" "),s("td",[t._v("支持流式（"),s("code",[t._v("SOCK_STREAM")]),t._v("）和数据报（"),s("code",[t._v("SOCK_DGRAM")]),t._v("），均保留边界")]),t._v(" "),s("td",[t._v("TCP为流式（无边界），UDP为数据报（有边界）")])])])]),t._v(" "),s("p",[t._v("示例："),s("br"),t._v("\n• 本地Redis服务使用UNIX Socket（"),s("code",[t._v("redis-cli -s /tmp/redis.sock")]),t._v("）时，吞吐量显著高于TCP连接；")]),t._v(" "),s("p",[t._v("• Nginx配置本地监听时，优先选择UNIX Socket以降低延迟（如"),s("code",[t._v("listen unix:/var/run/nginx.sock")]),t._v("）。")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("三、安全性与权限控制")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("特性")]),t._v(" "),s("th",[t._v("UNIX Socket")]),t._v(" "),s("th",[t._v("TCP/IP Socket")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("权限控制")]),t._v(" "),s("td",[t._v("通过文件系统权限（"),s("code",[t._v("chmod")]),t._v("/"),s("code",[t._v("chown")]),t._v("）管理")]),t._v(" "),s("td",[t._v("依赖网络防火墙规则和SSL/TLS加密")])]),t._v(" "),s("tr",[s("td",[t._v("攻击面")]),t._v(" "),s("td",[t._v("仅限本地用户，安全性更高")]),t._v(" "),s("td",[t._v("暴露于网络，需防范DDoS、端口扫描等攻击")])])])]),t._v(" "),s("p",[t._v("场景对比："),s("br"),t._v("\n• Docker守护进程（"),s("code",[t._v("/var/run/docker.sock")]),t._v("）通过文件权限限制访问，避免未授权用户操作容器；")]),t._v(" "),s("p",[t._v("• Web服务若使用TCP/IP，需配置防火墙规则（如"),s("code",[t._v("iptables")]),t._v("）和HTTPS加密。")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("四、典型应用场景")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("场景")]),t._v(" "),s("th",[t._v("UNIX Socket")]),t._v(" "),s("th",[t._v("TCP/IP Socket")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("本地服务通信")]),t._v(" "),s("td",[t._v("数据库（MySQL、Redis）、容器间通信（Docker）、系统服务（systemd）")]),t._v(" "),s("td",[t._v("Web服务器（Nginx、Apache）、远程API调用、分布式系统")])]),t._v(" "),s("tr",[s("td",[t._v("高性能需求")]),t._v(" "),s("td",[t._v("高频事件通知（如线程池唤醒）、低延迟数据传输")]),t._v(" "),s("td",[t._v("跨主机负载均衡、大规模集群通信")])]),t._v(" "),s("tr",[s("td",[t._v("轻量级通信")]),t._v(" "),s("td",[t._v("进程间传递文件描述符、协程调度事件（如Golang的"),s("code",[t._v("eventfd")]),t._v("）")]),t._v(" "),s("td",[t._v("跨语言通信（如Java与Python服务交互）")])])])]),t._v(" "),s("p",[t._v("示例代码："),s("br"),t._v("\n• UNIX Socket服务端（C语言）：")]),t._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("sockaddr_un")]),t._v(" addr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sun_family "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AF_UNIX "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("strcpy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sun_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp/mysocket"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("sockaddr")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("addr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("• TCP Socket客户端（Go语言）：")]),t._v(" "),s("div",{staticClass:"language-go line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("conn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" net"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Dial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tcp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:8080"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("defer")]),t._v(" conn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("hr"),t._v(" "),s("p",[s("strong",[t._v("五、选择依据")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("是否需要跨主机："),s("br"),t._v("\n• 本地通信选UNIX Socket（高性能、低开销）；")]),t._v(" "),s("p",[t._v("• 跨网络选TCP/IP Socket（灵活支持分布式架构）。")])]),t._v(" "),s("li",[s("p",[t._v("性能与安全优先级："),s("br"),t._v("\n• 高吞吐、低延迟场景（如数据库）优先UNIX Socket；")]),t._v(" "),s("p",[t._v("• 需网络隔离的场景（如公有云服务）强制使用TCP/IP + 安全策略。")])]),t._v(" "),s("li",[s("p",[t._v("协议兼容性："),s("br"),t._v("\n• 混合架构可组合使用（如Nginx用UNIX Socket接收本地请求，TCP Socket处理外部流量）。")])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("总结")]),t._v("\nUNIX Socket是本地进程间通信的黄金标准，适合追求性能与安全隔离的场景；而TCP/IP Socket是跨网络通信的基石，为分布式系统提供灵活性和扩展性。实际开发中，两者常结合使用以平衡性能与功能需求。")])])}),[],!1,null,null,null);s.default=a.exports}}]);