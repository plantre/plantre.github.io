(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{449:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("以下是基于 Spring Boot 官方文档及多篇实践总结的 "),a("code",[s._v("application.yml")]),s._v(" 中 Kafka 的最全配置详解，涵盖生产者、消费者、监听器、安全认证等场景，按模块分类整理：")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"⚙️-一、公共基础配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚙️-一、公共基础配置"}},[s._v("#")]),s._v(" ⚙️ "),a("strong",[s._v("一、公共基础配置")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kafka")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Kafka 集群地址（必填，多节点逗号分隔）")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("bootstrap-servers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9092")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9092")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9092")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局属性扩展（支持所有 Kafka 原生参数）")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("security.protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" SASL_SSL  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安全协议（如 SASL_SSL）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sasl.mechanism")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" SCRAM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("SHA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 认证机制")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sasl.jaas.config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(' org.apache.kafka.common.security.scram.ScramLoginModule required username="user" password="secret"; '),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# JAAS 配置")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"📤-二、生产者配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#📤-二、生产者配置"}},[s._v("#")]),s._v(" 📤 "),a("strong",[s._v("二、生产者配置")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kafka")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("producer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 序列化器（必填）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key-serializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.kafka.common.serialization.StringSerializer\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value-serializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.kafka.common.serialization.StringSerializer\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 消息确认机制（可靠性）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("acks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" all  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选值：0（无需确认）、1（Leader 确认）、all（ISR 全部确认）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("retries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送失败重试次数")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 性能优化")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("batch-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 批量发送大小（字节），默认 16KB")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("linger-ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 消息等待时间（毫秒），积攒更多消息批量发送")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("buffer-memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33554432")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生产者缓冲区大小（字节），默认 32MB")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("compression-type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" gzip  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩算法（可选 gzip/lz4/snappy）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 事务支持（需配合 @Transactional）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("transaction-id-prefix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启事务需配置前缀")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"📥-三、消费者配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#📥-三、消费者配置"}},[s._v("#")]),s._v(" 📥 "),a("strong",[s._v("三、消费者配置")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kafka")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("consumer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 反序列化器（必填）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key-deserializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.kafka.common.serialization.StringDeserializer\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value-deserializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.kafka.common.serialization.StringDeserializer\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 消费者组（必填）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("group-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("consumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("group\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 偏移量重置策略（无偏移时）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("auto-offset-reset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" earliest  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选：earliest（最早）、latest（最新）、none（报错）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 偏移量提交")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enable-auto-commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否自动提交偏移量（建议手动提交）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("auto-commit-interval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1000ms  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动提交间隔（默认 5s）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 消息拉取控制")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-poll-records")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单次 poll() 最大消息数（默认 500）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("fetch-max-wait")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 500ms  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取消息最长等待时间")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("fetch-min-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最小拉取数据量（字节）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会话与心跳")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("session-timeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 30000ms  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 消费者会话超时时间（默认 10s）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("heartbeat-interval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 3000ms  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 心跳间隔（需小于 session-timeout）")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"🔍-四、监听器配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔍-四、监听器配置"}},[s._v("#")]),s._v(" 🔍 "),a("strong",[s._v("四、监听器配置")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kafka")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("listener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 消费模式")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" batch  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选：single（单条）、batch（批量）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并发控制")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("concurrency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每个监听器的并发线程数（需 ≤ 分区数）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 偏移量提交方式")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ack-mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" manual_immediate  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 手动提交（可选：RECORD、BATCH、TIME等）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误处理")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("missing-topics-fatal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Topic 不存在时是否报错（默认 true）")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"🔒-五、安全认证扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔒-五、安全认证扩展"}},[s._v("#")]),s._v(" 🔒 "),a("strong",[s._v("五、安全认证扩展")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kafka")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SSL 加密")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("security.protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" SSL\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ssl.truststore-location")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" classpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/kafka.client.truststore.jks\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ssl.truststore-password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" changeit\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SASL 认证")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("security.protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" SASL_SSL\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sasl.mechanism")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PLAIN\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sasl.jaas.config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(' org.apache.kafka.common.security.plain.PlainLoginModule required username="admin" password="admin'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('secret";\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"⚠️-六、重要注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-六、重要注意事项"}},[s._v("#")]),s._v(" ⚠️ "),a("strong",[s._v("六、重要注意事项")])]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("序列化兼容性")])]),s._v(" "),a("ul",[a("li",[s._v("若传输 JSON 数据，使用 "),a("code",[s._v("JsonSerializer")]),s._v("/"),a("code",[s._v("JsonDeserializer")]),s._v("，并配置信任包："),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring.kafka.consumer.properties.spring.json.trusted.packages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" com.example.model\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("批量消费优化")])]),s._v(" "),a("ul",[a("li",[s._v("启用 "),a("code",[s._v("batch")]),s._v(" 监听器时，消费者方法参数需改为 "),a("code",[s._v("List<ConsumerRecord>")]),s._v("："),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@KafkaListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("topics "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-topic"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("batchListen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConsumerRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" records"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 批量处理逻辑")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("生产环境建议")])]),s._v(" "),a("ul",[a("li",[s._v("关闭自动提交（"),a("code",[s._v("enable-auto-commit: false")]),s._v("），通过 "),a("code",[s._v("Acknowledgment")]),s._v(" 手动提交偏移量")]),s._v(" "),a("li",[s._v("配置 "),a("code",[s._v("retries")]),s._v(" 和 "),a("code",[s._v("delivery.timeout.ms")]),s._v(" 防止消息丢失")]),s._v(" "),a("li",[s._v("监控 "),a("code",[s._v("max.poll.interval.ms")]),s._v(" 避免消费者被踢出组")])])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"💎-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#💎-总结"}},[s._v("#")]),s._v(" 💎 "),a("strong",[s._v("总结")])]),s._v(" "),a("blockquote",[a("p",[s._v("以上配置覆盖了 Kafka 在 Spring Boot 中的核心场景，实际使用时可根据需求删减。完整配置模板可参考 "),a("a",{attrs:{href:"https://docs.spring.io/spring-kafka/docs/current/reference/html/#configuration",target:"_blank",rel:"noopener noreferrer"}},[s._v("Spring Kafka 官方文档"),a("OutboundLink")],1),s._v("。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);