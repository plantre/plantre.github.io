(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{512:function(t,s,a){"use strict";a.r(s);var e=a(7),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Prometheus 是一款开源的监控与告警系统，专注于时间序列数据的采集、存储和分析，尤其擅长云原生和动态分布式环境的监控需求。以下是其核心特性与架构解析：")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("一、核心特性")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("多维数据模型"),s("br"),t._v("\nPrometheus 使用「指标名称 + 标签键值对」的模型标识时间序列数据，例如 "),s("code",[t._v('http_requests_total{method="GET", status="200"}')]),t._v("。这种设计支持灵活的数据聚合和筛选，便于从不同维度（如请求方法、响应状态）分析系统行为。")])]),t._v(" "),s("li",[s("p",[t._v("强大的查询语言（PromQL）"),s("br"),t._v("\n提供专为时间序列设计的 PromQL 语言，支持复杂查询、数学运算和实时分析。例如，计算 CPU 使用率可表达为：")]),t._v(" "),s("div",{staticClass:"language-promql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-promql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("avg")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token vector-match"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token label-key attr-name"}},[t._v("instance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("irate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node_cpu_seconds_total"),s("span",{pre:!0,attrs:{class:"token context-labels"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token label-key attr-name"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token label-value attr-value"}},[t._v('"idle"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token context-range"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token range-duration number"}},[t._v("5m")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("这种能力使其在故障诊断和性能优化中表现突出。")])]),t._v(" "),s("li",[s("p",[t._v("主动拉取（Pull）与推送（Push）结合"),s("br"),t._v("\n默认通过 HTTP 协议主动拉取目标端点（如 "),s("code",[t._v("/metrics")]),t._v("）的数据，适用于动态服务发现场景。短期任务则通过 Pushgateway 推送数据，弥补拉取模型的不足。")])]),t._v(" "),s("li",[s("p",[t._v("高效存储与扩展"),s("br"),t._v("\n内置时间序列数据库（TSDB），支持本地存储压缩和远程存储扩展（如 Thanos、Cortex），可处理海量监控数据。数据保留策略灵活，支持基于时间或大小的清理机制。")])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("二、核心架构")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Prometheus Server"),s("br"),t._v("\n• 数据抓取：定期从配置的目标（Targets）拉取指标，支持静态配置和服务发现（如 Kubernetes、Consul）。")]),t._v(" "),s("p",[t._v("• 存储引擎：TSDB 优化时间序列存储，内存索引加速查询，支持高并发读写。")]),t._v(" "),s("p",[t._v("• 规则计算：预定义告警规则（Alert Rules）和记录规则（Recording Rules），实时生成新指标或触发告警。")])]),t._v(" "),s("li",[s("p",[t._v("Exporters（数据采集器）"),s("br"),t._v("\n将第三方系统（如 MySQL、Node）的指标转换为 Prometheus 兼容格式。常用 Exporters 包括：\n• Node Exporter：采集主机资源（CPU、内存、磁盘）。")]),t._v(" "),s("p",[t._v("• Blackbox Exporter：探测网络服务可用性。")]),t._v(" "),s("p",[t._v("• 自定义 Exporter：适配特定应用监控需求。")])]),t._v(" "),s("li",[s("p",[t._v("Alertmanager"),s("br"),t._v("\n处理告警通知的去重、分组和路由，支持邮件、Slack、Webhook 等多种通知渠道。例如，可配置静默规则避免重复告警干扰。")])]),t._v(" "),s("li",[s("p",[t._v("Pushgateway"),s("br"),t._v("\n临时存储短期任务（如批处理作业）的指标数据，确保其生命周期内数据可被拉取。")])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("三、适用场景与限制")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("推荐场景"),s("br"),t._v("\n• 云原生与微服务：Kubernetes 容器集群监控。")]),t._v(" "),s("p",[t._v("• 动态基础设施：自动发现弹性伸缩的服务实例。")]),t._v(" "),s("p",[t._v("• 实时性能分析：通过 PromQL 快速定位瓶颈，如 API 延迟、数据库查询耗时。")])]),t._v(" "),s("li",[s("p",[t._v("不适用场景"),s("br"),t._v("\n• 100% 精确计费：数据采集可能存在遗漏，不适合计费系统。")]),t._v(" "),s("p",[t._v("• 长期历史数据分析：默认本地存储保留 15 天，需依赖远程存储扩展。")])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("四、生态系统与工具集成")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("可视化工具"),s("br"),t._v("\n原生 Web UI 提供基础查询界面，但通常与 Grafana 集成，构建丰富的监控仪表盘。")])]),t._v(" "),s("li",[s("p",[t._v("服务发现"),s("br"),t._v("\n支持 Kubernetes、Consul 等动态发现机制，适应弹性伸缩环境。")])]),t._v(" "),s("li",[s("p",[t._v("社区生态"),s("br"),t._v("\n提供数百种官方和社区维护的 Exporters，覆盖数据库、消息队列、硬件设备等。")])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("总结")]),s("br"),t._v("\nPrometheus 凭借其灵活的模型、高效的存储和强大的查询能力，已成为云原生监控的事实标准。其设计兼顾可靠性与扩展性，尤其适合动态和分布式环境，但在高精度计费等场景需谨慎使用。结合 Alertmanager 和 Grafana，可构建从数据采集到告警可视化的完整监控链路。")])])}),[],!1,null,null,null);s.default=r.exports}}]);