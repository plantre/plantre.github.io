(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{527:function(s,a,e){"use strict";e.r(a);var t=e(7),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("以下是SSH命令的常用场景详解，涵盖远程管理、文件传输、网络隧道等核心应用，结合不同场景的操作示例和安全建议：")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("一、基础场景：远程登录与服务器管理")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安全登录远程服务器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" username@hostname  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认端口22")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2222")]),s._v(" user@192.168.1.100  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定非标端口")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("应用场景：运维人员管理Linux服务器、云主机（如腾讯云/阿里云实例）。"),a("br"),s._v("\n安全建议：建议禁用root直接登录，改用普通用户+sudo权限。")])]),s._v(" "),a("li",[a("p",[s._v("密钥认证免密登录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" rsa  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成密钥对")]),s._v("\nssh-copy-id user@hostname  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传公钥至服务器")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("优势：比密码更安全，避免暴力破解风险。"),a("br"),s._v("\n注意：私钥需设置600权限，禁止外泄。")])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("二、文件传输场景")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("SCP加密传输文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" file.txt user@host:/remote/path  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传本地文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2222")]),s._v(" user@host:/data/logs/*.log ./  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载远程文件")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("适用场景：部署代码、备份日志或传输配置文件。")])]),s._v(" "),a("li",[a("p",[s._v("SFTP交互式文件管理")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sftp")]),s._v(" user@hostname  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动交互式会话")]),s._v("\nsftp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" put local_file  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传文件")]),s._v("\nsftp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get remote_file  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载文件")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("优势：支持目录浏览、断点续传，适合批量操作。")])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("三、网络隧道与端口转发")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("本地端口转发（访问内网服务）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(":db.internal:3306 jump@bastion-host  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 映射内网数据库")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("场景：通过跳板机访问内网MySQL、Redis等受限服务。")])]),s._v(" "),a("li",[a("p",[s._v("远程端口转发（暴露本地服务）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":localhost:80 user@public-server  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将本地Web服务暴露到公网")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("应用：开发调试时临时分享本地服务，需服务器配置"),a("code",[s._v("GatewayPorts yes")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("动态端口转发（全局代理）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v(" user@proxy-server  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建SOCKS5代理")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("用途：加密浏览器流量，绕过网络限制访问外网资源。")])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("四、自动化运维场景")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("远程执行命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" user@host "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls /var/log"')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单次命令执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tar -czf - /data"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" backup.tar.gz  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包远程目录到本地")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("扩展应用：结合Ansible、Shell脚本实现批量服务器操作。")])]),s._v(" "),a("li",[a("p",[s._v("保持长连接")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ServerAliveInterval")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" user@host  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每60秒发送心跳包")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("解决痛点：防止SSH会话因空闲断开，适合长时间任务。")])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("五、高级功能与安全配置")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("X11图形界面转发")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" user@hostname  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用X11转发")]),s._v("\nxclock  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在远程运行图形程序并本地显示")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("适用场景：远程运行GUI工具（如Wireshark、IDE）。")])]),s._v(" "),a("li",[a("p",[s._v("SSH配置文件优化")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" ~/.ssh/config  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义连接参数")]),s._v("\nHost myserver\n  HostName "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.100\n  Port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2222")]),s._v("\n  User admin\n  IdentityFile ~/.ssh/myserver_key\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("优势：简化重复输入，支持多主机别名管理。")])]),s._v(" "),a("li",[a("p",[s._v("安全加固措施"),a("br"),s._v("\n• 修改默认端口："),a("code",[s._v("Port 2222")]),s._v("（需同步调整防火墙）")]),s._v(" "),a("p",[s._v("• 禁用密码登录："),a("code",[s._v("PasswordAuthentication no")])]),s._v(" "),a("p",[s._v("• IP白名单限制："),a("code",[s._v("AllowUsers user@192.168.1.*")])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("六、典型问题解决方案")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("问题")]),s._v(" "),a("th",[s._v("解决方法")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("连接超时")]),s._v(" "),a("td",[s._v("检查防火墙规则、SSH服务状态（"),a("code",[s._v("systemctl status sshd")]),s._v("）")])]),s._v(" "),a("tr",[a("td",[s._v("文件传输权限错误")]),s._v(" "),a("td",[s._v("确保目标目录可写（"),a("code",[s._v("chmod 755 /path")]),s._v("），或使用"),a("code",[s._v("sudo")]),s._v("提权")])]),s._v(" "),a("tr",[a("td",[s._v("密钥认证失败")]),s._v(" "),a("td",[s._v("检查"),a("code",[s._v("~/.ssh/authorized_keys")]),s._v("文件权限（应为600），确认公钥内容完整")])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("总结")]),s._v("\nSSH不仅是远程登录工具，更是安全运维的核心组件。掌握其多场景应用（如隧道穿透、自动化脚本、密钥管理），可大幅提升工作效率。建议优先使用密钥认证，并定期审计SSH日志（"),a("code",[s._v("/var/log/auth.log")]),s._v("）以防范未授权访问。")])])}),[],!1,null,null,null);a.default=n.exports}}]);