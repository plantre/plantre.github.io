(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{561:function(a,s,t){"use strict";t.r(s);var e=t(7),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("ä½ ç°åœ¨çš„ç›®æ ‡æ˜¯ï¼š")]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"ğŸ¯-ç›®æ ‡è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç›®æ ‡è¯´æ˜"}},[a._v("#")]),a._v(" ğŸ¯ ç›®æ ‡è¯´æ˜")]),a._v(" "),s("p",[a._v("åœ¨ä¸»æœº "),s("strong",[a._v("Aï¼ˆ192.168.2.53ï¼‰")]),a._v(" ä¸Šï¼Œæœ‰ä¸€ä¸ªåº”ç”¨å‘èµ· TCP è¯·æ±‚åˆ°ï¼š")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("ç›®æ ‡åœ°å€ï¼š115.236.18.198:11111ï¼ˆå…¬ç½‘ IPï¼Œå…¶å®å·²ç»ä¸å¯ç”¨ï¼‰\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("ä½ æƒ³è®©ï¼š")]),a._v(" "),s("ul",[s("li",[a._v("è¿™ä¸ªè¯·æ±‚å®é™…ä¸Šè¢«é€æ˜åœ°"),s("strong",[a._v("é‡å®šå‘åˆ°å†…ç½‘ä¸»æœº Cï¼ˆ192.168.2.10ï¼‰")])]),a._v(" "),s("li",[a._v("C èƒ½å¤Ÿå®Œæ•´æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæ­£å¸¸å»ºç«‹ TCP è¿æ¥ï¼Œå¹¶å“åº”")])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"âœ…-å®ç°æ–¹å¼-ä½¿ç”¨-iptables-å†…æ ¸è½¬å‘-nat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-å®ç°æ–¹å¼-ä½¿ç”¨-iptables-å†…æ ¸è½¬å‘-nat"}},[a._v("#")]),a._v(" âœ… å®ç°æ–¹å¼ï¼šä½¿ç”¨ "),s("code",[a._v("iptables")]),a._v(" + å†…æ ¸è½¬å‘ + NAT")]),a._v(" "),s("p",[a._v("è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ "),s("strong",[a._v("é€æ˜ TCP ä»£ç†/é‡å®šå‘")]),a._v(" åœºæ™¯ï¼Œä½¿ç”¨ "),s("code",[a._v("iptables")]),a._v(" åš "),s("strong",[a._v("DNAT")]),a._v("ï¼ˆç›®çš„åœ°å€è½¬æ¢ï¼‰ï¼Œå°†è¯·æ±‚ä»å…¬ç½‘ IP è½¬å‘åˆ°å†…ç½‘ IPã€‚")]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"ğŸ› ï¸-æ“ä½œæ­¥éª¤-åœ¨ä¸»æœº-a-ä¸Šæ‰§è¡Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ› ï¸-æ“ä½œæ­¥éª¤-åœ¨ä¸»æœº-a-ä¸Šæ‰§è¡Œ"}},[a._v("#")]),a._v(" ğŸ› ï¸ æ“ä½œæ­¥éª¤ï¼ˆåœ¨ä¸»æœº A ä¸Šæ‰§è¡Œï¼‰")]),a._v(" "),s("h3",{attrs:{id:"_1ï¸âƒ£-å¼€å¯å†…æ ¸-ip-è½¬å‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-å¼€å¯å†…æ ¸-ip-è½¬å‘"}},[a._v("#")]),a._v(" 1ï¸âƒ£ å¼€å¯å†…æ ¸ IP è½¬å‘")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sysctl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-w")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("net.ipv4.ip_forward")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("blockquote",[s("p",[a._v("ä¸´æ—¶ç”Ÿæ•ˆã€‚æƒ³æ°¸ä¹…ç”Ÿæ•ˆï¼Œç¼–è¾‘ "),s("code",[a._v("/etc/sysctl.conf")]),a._v(" åŠ å…¥ï¼š")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("net.ipv4.ip_forward "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])]),a._v(" "),s("hr"),a._v(" "),s("h3",{attrs:{id:"_2ï¸âƒ£-æ·»åŠ -dnat-è½¬å‘è§„åˆ™-å°†è¯·æ±‚-115-236-18-198-è½¬åˆ°-c"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2ï¸âƒ£-æ·»åŠ -dnat-è½¬å‘è§„åˆ™-å°†è¯·æ±‚-115-236-18-198-è½¬åˆ°-c"}},[a._v("#")]),a._v(" 2ï¸âƒ£ æ·»åŠ  DNAT è½¬å‘è§„åˆ™ï¼ˆå°†è¯·æ±‚ 115.236.18.198 è½¬åˆ° Cï¼‰")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" OUTPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("115.236")]),a._v(".18.198 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11111")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DNAT --to-destination "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".2.10:11111\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("è¯´æ˜ï¼š")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("OUTPUT")]),a._v(" é“¾é€‚ç”¨äºæœ¬æœºå‘å‡ºçš„è¿æ¥ï¼ˆä½ çš„åº”ç”¨å°±åœ¨ A ä¸Šï¼‰")]),a._v(" "),s("li",[a._v("æ‰€æœ‰ç›®æ ‡ä¸ºå…¬ç½‘ IP "),s("code",[a._v("115.236.18.198")]),a._v(" çš„è¯·æ±‚å°†è¢«æ”¹å†™ä¸º "),s("code",[a._v("192.168.2.10")])])]),a._v(" "),s("hr"),a._v(" "),s("h3",{attrs:{id:"_3ï¸âƒ£-è®¾ç½®-snat-å¯é€‰-ä¸€èˆ¬ä¸éœ€è¦"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3ï¸âƒ£-è®¾ç½®-snat-å¯é€‰-ä¸€èˆ¬ä¸éœ€è¦"}},[a._v("#")]),a._v(" 3ï¸âƒ£ è®¾ç½® SNATï¼ˆå¯é€‰ï¼Œä¸€èˆ¬ä¸éœ€è¦ï¼‰")]),a._v(" "),s("p",[a._v("å¦‚æœä½ å‘ç° "),s("strong",[a._v("C æ— æ³•æ­£å¸¸å“åº”è¯·æ±‚")]),a._v("ï¼Œå¯æ·»åŠ è¿™æ¡ SNATï¼ˆä¼ªè£…æº IP ä¸º Aï¼‰ï¼š")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" POSTROUTING "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".2.10 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11111")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" MASQUERADE\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"âœ…-æ•´ä½“æµç¨‹è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-æ•´ä½“æµç¨‹è¯´æ˜"}},[a._v("#")]),a._v(" âœ… æ•´ä½“æµç¨‹è¯´æ˜ï¼š")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("æ­¥éª¤")]),a._v(" "),s("th",[a._v("æ•°æ®åŒ…")]),a._v(" "),s("th",[a._v("è¯´æ˜")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("åº”ç”¨å‘èµ·è¿æ¥")]),a._v(" "),s("td",[a._v("æºï¼š192.168.2.53"),s("br"),a._v("ç›®æ ‡ï¼š115.236.18.198:11111")]),a._v(" "),s("td",[a._v("åº”ç”¨ä»ç„¶ä»¥ä¸ºåœ¨è®¿é—®å…¬ç½‘")])]),a._v(" "),s("tr",[s("td",[a._v("iptablesï¼ˆOUTPUT é“¾ï¼‰é‡å†™")]),a._v(" "),s("td",[a._v("ä¿®æ”¹ç›®æ ‡åœ°å€ â†’ 192.168.2.10")]),a._v(" "),s("td",[a._v("å®é™…è¿æ¥è½¬å‘ C")])]),a._v(" "),s("tr",[s("td",[a._v("å»ºç«‹è¿æ¥")]),a._v(" "),s("td",[a._v("A â†” C å®Œæˆä¸‰æ¬¡æ¡æ‰‹")]),a._v(" "),s("td")]),a._v(" "),s("tr",[s("td",[a._v("C å›å¤å“åº”")]),a._v(" "),s("td",[a._v("æºåœ°å€ä¸º Cï¼Œç›®æ ‡ä»æ˜¯ A")]),a._v(" "),s("td")]),a._v(" "),s("tr",[s("td",[a._v("åº”ç”¨æ”¶åˆ°å“åº”")]),a._v(" "),s("td",[a._v("åº”ç”¨ä»¥ä¸ºæ¥è‡ªå…¬ç½‘ IPï¼Œä½†å…¶å®æ˜¯ C")]),a._v(" "),s("td")])])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"ğŸ§ª-æµ‹è¯•å»ºè®®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§ª-æµ‹è¯•å»ºè®®"}},[a._v("#")]),a._v(" ğŸ§ª æµ‹è¯•å»ºè®®")]),a._v(" "),s("ol",[s("li",[a._v("åœ¨ C ä¸Šè¿è¡Œç›‘å¬æœåŠ¡ï¼š")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11111")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("åœ¨ A ä¸Šç”¨ä½ åŸæœ¬çš„ç¨‹åºå‘èµ·è¯·æ±‚ï¼Œæˆ–ä½¿ç”¨ï¼š")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("telnet "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("115.236")]),a._v(".18.198 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11111")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æˆ–")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" http://115.236.18.198:11111\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("C ä¸Šåº”è¯¥èƒ½çœ‹åˆ°è¿æ¥å»ºç«‹ã€‚")])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"ğŸ”-å¦‚æœæƒ³è®©å…¶ä»–ä¸»æœºçš„è¯·æ±‚ä¹Ÿè¢«è½¬å‘æ€ä¹ˆåŠ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”-å¦‚æœæƒ³è®©å…¶ä»–ä¸»æœºçš„è¯·æ±‚ä¹Ÿè¢«è½¬å‘æ€ä¹ˆåŠ"}},[a._v("#")]),a._v(" ğŸ” å¦‚æœæƒ³è®©"),s("strong",[a._v("å…¶ä»–ä¸»æœºçš„è¯·æ±‚ä¹Ÿè¢«è½¬å‘")]),a._v("æ€ä¹ˆåŠï¼Ÿ")]),a._v(" "),s("p",[a._v("ä½ éœ€è¦æ”¹ç”¨ï¼š")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" PREROUTING "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("115.236")]),a._v(".18.198 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11111")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DNAT --to-destination "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".2.10:11111\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("ä½†è¿™è¦æ±‚ï¼š")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("A æ˜¯è¿™äº›ä¸»æœºçš„ç½‘å…³")])]),a._v(" "),s("li",[a._v("æˆ–è€…ä½ å°†è¿™äº›ä¸»æœºçš„æµé‡å¼ºåˆ¶ç»è¿‡ Aï¼ˆé™æ€è·¯ç”±æˆ–ç½‘æ¡¥ï¼‰")])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"âœ…-æ€»ç»“æ–¹æ¡ˆ-ä½ çš„åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-æ€»ç»“æ–¹æ¡ˆ-ä½ çš„åœºæ™¯"}},[a._v("#")]),a._v(" âœ… æ€»ç»“æ–¹æ¡ˆï¼ˆä½ çš„åœºæ™¯ï¼‰")]),a._v(" "),s("p",[a._v("åœ¨ä¸»æœº A ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1. å¯ç”¨ IP è½¬å‘")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tee")]),a._v(" /proc/sys/net/ipv4/ip_forward\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 2. NAT è§„åˆ™ - æœ¬åœ°åº”ç”¨å‘å‡ºçš„è¯·æ±‚")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" OUTPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("115.236")]),a._v(".18.198 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11111")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DNAT --to-destination "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".2.10:11111\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("è¿™ä¼šè®©æœ¬æœºæ‰€æœ‰è®¿é—® "),s("code",[a._v("115.236.18.198:11111")]),a._v(" çš„ TCP è¯·æ±‚éƒ½å‘ç»™ "),s("code",[a._v("192.168.2.10:11111")]),a._v("ï¼Œå®Œå…¨é€æ˜ã€‚")]),a._v(" "),s("hr")])}),[],!1,null,null,null);s.default=r.exports}}]);