(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{428:function(_,v,t){"use strict";t.r(v);var s=t(7),r=Object(s.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("p",[_._v("以下是主流分布式系统（Zookeeper、Nacos、Eureka、Consul、Redis Cluster、Kafka、Elasticsearch）的核心分布式算法及其作用，按系统分类说明：")]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"📦-一、协调与配置服务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#📦-一、协调与配置服务"}},[_._v("#")]),_._v(" 📦 "),v("strong",[_._v("一、协调与配置服务")])]),_._v(" "),v("h4",{attrs:{id:"_1-zookeeper"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-zookeeper"}},[_._v("#")]),_._v(" 1. "),v("strong",[_._v("Zookeeper")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("共识算法")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("ZAB协议")]),_._v("（Zookeeper Atomic Broadcast）\n"),v("ul",[v("li",[_._v("类似Paxos的变种，专为Zookeeper设计，支持崩溃恢复与原子广播。")]),_._v(" "),v("li",[_._v("写操作由Leader发起，通过两阶段提交（2PC简化版）实现多数节点确认（Quorum）后提交。")])])]),_._v(" "),v("li",[v("strong",[_._v("Fast Leader选举")]),_._v("：\n"),v("ul",[v("li",[_._v("基于事务ID（ZXID）和节点ID（myid）选举Leader，优先选择数据最新的节点（ZXID最大者）。")])])])])]),_._v(" "),v("li",[v("strong",[_._v("数据模型")]),_._v("：\n"),v("ul",[v("li",[_._v("树形结构的"),v("strong",[_._v("Znode")]),_._v("（持久节点/临时节点），通过Watcher机制监听变更。")])])]),_._v(" "),v("li",[v("strong",[_._v("典型场景")]),_._v("：分布式锁、配置管理（Hadoop、Kafka早期）。")])]),_._v(" "),v("h4",{attrs:{id:"_2-nacos"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-nacos"}},[_._v("#")]),_._v(" 2. "),v("strong",[_._v("Nacos")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("双模式一致性协议")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("CP模式")]),_._v("：使用"),v("strong",[_._v("Raft算法")]),_._v("管理配置数据，保证强一致性。")]),_._v(" "),v("li",[v("strong",[_._v("AP模式")]),_._v("：服务发现采用"),v("strong",[_._v("Distro协议")]),_._v("（Gossip变种），通过节点间随机同步实现最终一致性。")])])]),_._v(" "),v("li",[v("strong",[_._v("健康检查")]),_._v("：\n"),v("ul",[v("li",[_._v("主动心跳检测 + 被动上报，自动剔除异常节点。")])])]),_._v(" "),v("li",[v("strong",[_._v("典型场景")]),_._v("：微服务配置中心、动态服务发现（Spring Cloud Alibaba）。")])]),_._v(" "),v("h4",{attrs:{id:"_3-eureka"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-eureka"}},[_._v("#")]),_._v(" 3. "),v("strong",[_._v("Eureka")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("最终一致性协议")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("Gossip协议")]),_._v("：节点间随机交换服务注册表，实现最终一致。")]),_._v(" "),v("li",[v("strong",[_._v("自我保护机制")]),_._v("：网络分区时保留现有节点列表，避免过度注销。")])])]),_._v(" "),v("li",[v("strong",[_._v("无Leader设计")]),_._v("：\n"),v("ul",[v("li",[_._v("各节点平等，客户端可从任意节点获取服务列表（可能短暂不一致）。")])])]),_._v(" "),v("li",[v("strong",[_._v("典型场景")]),_._v("：Netflix微服务生态中的轻量级服务发现组件。")])]),_._v(" "),v("h4",{attrs:{id:"_4-consul"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-consul"}},[_._v("#")]),_._v(" 4. "),v("strong",[_._v("Consul")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("共识算法")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("Raft协议")]),_._v("：管理服务注册与键值存储，确保强一致性。")])])]),_._v(" "),v("li",[v("strong",[_._v("健康检查")]),_._v("：\n"),v("ul",[v("li",[_._v("多模式支持（TCP/HTTP/Docker），结合"),v("strong",[_._v("Gossip协议")]),_._v("跨节点传播状态。")])])]),_._v(" "),v("li",[v("strong",[_._v("多数据中心")]),_._v("：\n"),v("ul",[v("li",[_._v("跨数据中心通信通过WAN Gossip同步。")])])]),_._v(" "),v("li",[v("strong",[_._v("典型场景")]),_._v("：多集群服务网格、跨地域配置同步（HashiCorp生态）。")])]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"🚀-二、数据存储与消息系统"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#🚀-二、数据存储与消息系统"}},[_._v("#")]),_._v(" 🚀 "),v("strong",[_._v("二、数据存储与消息系统")])]),_._v(" "),v("h4",{attrs:{id:"_1-redis-cluster"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-redis-cluster"}},[_._v("#")]),_._v(" 1. "),v("strong",[_._v("Redis Cluster")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("数据分片算法")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("哈希槽分区")]),_._v("（16384个Slot）：\n"),v("ul",[v("li",[_._v("键通过"),v("code",[_._v("CRC16(key) % 16384")]),_._v("计算槽位，由主节点管理。")]),_._v(" "),v("li",[_._v("扩缩容时仅迁移槽位，避免全局数据重分布。")])])])])]),_._v(" "),v("li",[v("strong",[_._v("高可用机制")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("主从复制")]),_._v(" + "),v("strong",[_._v("Gossip协议")]),_._v("（节点状态同步）。")]),_._v(" "),v("li",[_._v("故障转移：通过Raft-like选举（自研）切换主节点。")])])]),_._v(" "),v("li",[v("strong",[_._v("典型场景")]),_._v("：分布式缓存、会话存储。")])]),_._v(" "),v("h4",{attrs:{id:"_2-kafka"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-kafka"}},[_._v("#")]),_._v(" 2. "),v("strong",[_._v("Kafka")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("元数据管理")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("早期依赖Zookeeper")]),_._v("：存储Broker、Topic分区等元数据，通过ZAB协议保证一致性。")]),_._v(" "),v("li",[v("strong",[_._v("KRaft模式")]),_._v("（新版本）：自研"),v("strong",[_._v("Raft变种")]),_._v("，取代Zookeeper，提升伸缩性。")])])]),_._v(" "),v("li",[v("strong",[_._v("副本同步")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("ISR机制")]),_._v("（In-Sync Replicas）：Leader维护同步副本列表，写入需ISR多数确认。")])])]),_._v(" "),v("li",[v("strong",[_._v("分区分配")]),_._v("：\n"),v("ul",[v("li",[_._v("生产者按Key哈希或轮询分配分区，消费者通过Rebalance算法（如RangeAssignor）分配分区。")])])])]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"🔍-三、搜索与分析引擎"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#🔍-三、搜索与分析引擎"}},[_._v("#")]),_._v(" 🔍 "),v("strong",[_._v("三、搜索与分析引擎")])]),_._v(" "),v("h4",{attrs:{id:"elasticsearch"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch"}},[_._v("#")]),_._v(" "),v("strong",[_._v("Elasticsearch")])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("分布式共识")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("Zen Discovery")]),_._v("（旧版）：基于Paxos变种选举Master节点。")])])]),_._v(" "),v("li",[v("strong",[_._v("数据一致性")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("PacificA算法")]),_._v("：主分片同步写副本，基于版本号（Sequence ID）冲突检测。")])])]),_._v(" "),v("li",[v("strong",[_._v("搜索算法")]),_._v("：\n"),v("ul",[v("li",[v("strong",[_._v("BM25相关性排序")]),_._v("：结合词频（TF）、逆文档频率（IDF）计算得分。")]),_._v(" "),v("li",[v("strong",[_._v("分布式检索")]),_._v("：协调节点合并分片结果（Scatter-Gather模式）。")])])]),_._v(" "),v("li",[v("strong",[_._v("典型场景")]),_._v("：日志分析、全文检索（替代Solr依赖Zookeeper的设计）。")])]),_._v(" "),v("hr"),_._v(" "),v("h3",{attrs:{id:"💎-四、总结-各系统算法对比"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#💎-四、总结-各系统算法对比"}},[_._v("#")]),_._v(" 💎 "),v("strong",[_._v("四、总结：各系统算法对比")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("系统")])]),_._v(" "),v("th",[v("strong",[_._v("核心算法")])]),_._v(" "),v("th",[v("strong",[_._v("类型")])]),_._v(" "),v("th",[v("strong",[_._v("设计目标")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[_._v("Zookeeper")])]),_._v(" "),v("td",[_._v("ZAB协议、Fast Leader选举")]),_._v(" "),v("td",[_._v("CP")]),_._v(" "),v("td",[_._v("强一致协调服务")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Nacos")])]),_._v(" "),v("td",[_._v("Raft（配置）、Distro/Gossip（服务）")]),_._v(" "),v("td",[_._v("CP+AP可选")]),_._v(" "),v("td",[_._v("灵活一致性")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Eureka")])]),_._v(" "),v("td",[_._v("Gossip协议")]),_._v(" "),v("td",[_._v("AP")]),_._v(" "),v("td",[_._v("高可用服务发现")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Consul")])]),_._v(" "),v("td",[_._v("Raft协议、Gossip健康检查")]),_._v(" "),v("td",[_._v("CP")]),_._v(" "),v("td",[_._v("多数据中心强一致")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Redis Cluster")])]),_._v(" "),v("td",[_._v("哈希槽分区、Gossip状态同步")]),_._v(" "),v("td",[_._v("AP")]),_._v(" "),v("td",[_._v("高性能分片存储")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Kafka")])]),_._v(" "),v("td",[_._v("ISR、KRaft（Raft变种）")]),_._v(" "),v("td",[_._v("CP")]),_._v(" "),v("td",[_._v("高吞吐消息流")])]),_._v(" "),v("tr",[v("td",[v("strong",[_._v("Elasticsearch")])]),_._v(" "),v("td",[_._v("PacificA、BM25")]),_._v(" "),v("td",[_._v("AP/CP可选")]),_._v(" "),v("td",[_._v("近实时搜索与分析")])])])]),_._v(" "),v("blockquote",[v("p",[v("strong",[_._v("注")]),_._v("：")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("CP系统")]),_._v("（Zookeeper、Consul、Kafka）优先保证一致性，网络分区时可能拒绝写入。")]),_._v(" "),v("li",[v("strong",[_._v("AP系统")]),_._v("（Eureka、Redis Cluster）优先保证可用性，容忍短暂不一致。")]),_._v(" "),v("li",[v("strong",[_._v("混合型")]),_._v("（Nacos、Elasticsearch）支持按需选择一致性模型。")])])]),_._v(" "),v("p",[_._v("各系统的算法选择体现了对场景的权衡：协调服务（Zookeeper/Consul）倾向强一致，服务发现（Eureka/Nacos）倾向可用性，而数据系统（Kafka/Redis）则聚焦高性能与分区容忍。")])])}),[],!1,null,null,null);v.default=r.exports}}]);