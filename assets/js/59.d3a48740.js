(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{416:function(s,r,t){"use strict";t.r(r);var a=t(7),v=Object(a.a)({},(function(){var s=this,r=s._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("p",[s._v("åœ¨ Redis é›†ç¾¤ï¼ˆRedis Clusterï¼‰ä¸­ï¼Œæ•°æ®å­˜å‚¨çš„å…·ä½“ä¸»èŠ‚ç‚¹ç”± "),r("strong",[s._v("å“ˆå¸Œæ§½ï¼ˆHash Slotï¼‰åˆ†é…æœºåˆ¶")]),s._v(" å†³å®šã€‚å…¶æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š")]),s._v(" "),r("hr"),s._v(" "),r("h3",{attrs:{id:"ğŸ”‘-1-é”®å€¼æ˜ å°„åˆ°å“ˆå¸Œæ§½"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”‘-1-é”®å€¼æ˜ å°„åˆ°å“ˆå¸Œæ§½"}},[s._v("#")]),s._v(" ğŸ”‘ "),r("strong",[s._v("1. é”®å€¼æ˜ å°„åˆ°å“ˆå¸Œæ§½")])]),s._v(" "),r("p",[s._v("Redis é›†ç¾¤é¢„è®¾äº† "),r("strong",[s._v("16384 ä¸ªå“ˆå¸Œæ§½")]),s._v("ï¼ˆSlotï¼‰ï¼Œæ¯ä¸ªé”®ï¼ˆKeyï¼‰é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—æ‰€å±æ§½ä½ï¼š")]),s._v(" "),r("div",{staticClass:"language-plaintext line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-plaintext"}},[r("code",[s._v("Slot = CRC16(key) % 16384\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ul",[r("li",[r("strong",[s._v("CRC16ç®—æ³•")]),s._v("ï¼šè®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼ˆ16ä½æ•´æ•°ï¼‰ã€‚")]),s._v(" "),r("li",[r("strong",[s._v("å–æ¨¡è¿ç®—")]),s._v("ï¼šå°†å“ˆå¸Œå€¼å¯¹ "),r("code",[s._v("16384")]),s._v(" å–ä½™ï¼Œå¾—åˆ°æ§½ä½ç¼–å·ï¼ˆ0~16383ï¼‰ã€‚")])]),s._v(" "),r("blockquote",[r("p",[r("strong",[s._v("ç¤ºä¾‹")]),s._v("ï¼š"),r("br"),s._v("\nè‹¥é”®ä¸º "),r("code",[s._v("user:1001")]),s._v("ï¼Œè®¡ç®— "),r("code",[s._v('CRC16("user:1001") = 12345')]),s._v("ï¼Œåˆ™ "),r("code",[s._v("Slot = 12345 % 16384 = 12345")]),s._v("ã€‚")])]),s._v(" "),r("hr"),s._v(" "),r("h3",{attrs:{id:"âš™ï¸-2-æ§½ä½åˆ†é…åˆ°ä¸»èŠ‚ç‚¹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#âš™ï¸-2-æ§½ä½åˆ†é…åˆ°ä¸»èŠ‚ç‚¹"}},[s._v("#")]),s._v(" âš™ï¸ "),r("strong",[s._v("2. æ§½ä½åˆ†é…åˆ°ä¸»èŠ‚ç‚¹")])]),s._v(" "),r("p",[s._v("é›†ç¾¤åˆå§‹åŒ–æ—¶ï¼Œ16384 ä¸ªæ§½ä¼šè¢«"),r("strong",[s._v("å¹³å‡åˆ†é…")]),s._v("ç»™æ‰€æœ‰ä¸»èŠ‚ç‚¹ï¼š")]),s._v(" "),r("ul",[r("li",[r("strong",[s._v("åˆ†é…åŸåˆ™")]),s._v("ï¼šæ¯ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£ä¸€æ®µè¿ç»­çš„æ§½èŒƒå›´ï¼ˆå¦‚ Node1 è´Ÿè´£ 0~5460ï¼ŒNode2 è´Ÿè´£ 5461~10922 ç­‰ï¼‰ã€‚")]),s._v(" "),r("li",[r("strong",[s._v("åŠ¨æ€è°ƒæ•´")]),s._v("ï¼šæ‰©å®¹æˆ–ç¼©å®¹æ—¶ï¼Œæ§½ä½å¯é€šè¿‡å‘½ä»¤è¿ç§»åˆ°æ–°èŠ‚ç‚¹ï¼ˆå¦‚ "),r("code",[s._v("CLUSTER ADDSLOTS")]),s._v("ã€"),r("code",[s._v("CLUSTER SETSLOT")]),s._v("ï¼‰ã€‚")])]),s._v(" "),r("blockquote",[r("p",[r("strong",[s._v("å…³é”®ç‰¹æ€§")]),s._v("ï¼š"),r("br"),s._v("\næ§½ä½ä¸èŠ‚ç‚¹çš„æ˜ å°„å…³ç³»ç”±é›†ç¾¤å†…éƒ¨ç»´æŠ¤ï¼Œå®¢æˆ·ç«¯æ— éœ€ç¡¬ç¼–ç èŠ‚ç‚¹ä¿¡æ¯ã€‚")])]),s._v(" "),r("hr"),s._v(" "),r("h3",{attrs:{id:"ğŸ“¡-3-å®¢æˆ·ç«¯è¯·æ±‚è·¯ç”±æµç¨‹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“¡-3-å®¢æˆ·ç«¯è¯·æ±‚è·¯ç”±æµç¨‹"}},[s._v("#")]),s._v(" ğŸ“¡ "),r("strong",[s._v("3. å®¢æˆ·ç«¯è¯·æ±‚è·¯ç”±æµç¨‹")])]),s._v(" "),r("p",[s._v("å®¢æˆ·ç«¯è®¿é—®æ•°æ®æ—¶ï¼ŒæŒ‰ä»¥ä¸‹é€»è¾‘å®šä½ç›®æ ‡èŠ‚ç‚¹ï¼š")]),s._v(" "),r("ol",[r("li",[r("strong",[s._v("æœ¬åœ°ç¼“å­˜æŸ¥è¯¢")]),s._v("ï¼š"),r("br"),s._v("\nå®¢æˆ·ç«¯ï¼ˆå¦‚ JedisClusterï¼‰ç¼“å­˜äº†æ§½ä½ä¸èŠ‚ç‚¹çš„æ˜ å°„è¡¨ã€‚"),r("br"),s._v("\næ ¹æ®é”®è®¡ç®—æ§½ä½ï¼Œç›´æ¥è¯·æ±‚å¯¹åº”èŠ‚ç‚¹ã€‚")]),s._v(" "),r("li",[r("strong",[s._v("èŠ‚ç‚¹é‡å®šå‘")]),s._v("ï¼š\n"),r("ul",[r("li",[s._v("è‹¥è¯·æ±‚çš„èŠ‚ç‚¹"),r("strong",[s._v("ä¸è´Ÿè´£è¯¥æ§½")]),s._v("ï¼Œè¿”å› "),r("code",[s._v("MOVED")]),s._v(" é”™è¯¯ï¼ˆå«æ­£ç¡®èŠ‚ç‚¹åœ°å€ï¼‰ï¼Œå®¢æˆ·ç«¯æ›´æ–°ç¼“å­˜å¹¶é‡è¯•ã€‚")]),s._v(" "),r("li",[s._v("è‹¥æ§½ä½"),r("strong",[s._v("æ­£åœ¨è¿ç§»")]),s._v("ä¸­ï¼Œè¿”å› "),r("code",[s._v("ASK")]),s._v(" ä¸´æ—¶é‡å®šå‘ï¼Œå®¢æˆ·ç«¯éœ€å‘ç›®æ ‡èŠ‚ç‚¹å‘é€ "),r("code",[s._v("ASKING")]),s._v(" å‘½ä»¤åå†æ‰§è¡Œæ“ä½œã€‚")])])])]),s._v(" "),r("hr"),s._v(" "),r("h3",{attrs:{id:"ğŸ”„-4-èŠ‚ç‚¹å˜åŒ–æ—¶çš„å¤„ç†"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”„-4-èŠ‚ç‚¹å˜åŒ–æ—¶çš„å¤„ç†"}},[s._v("#")]),s._v(" ğŸ”„ "),r("strong",[s._v("4. èŠ‚ç‚¹å˜åŒ–æ—¶çš„å¤„ç†")])]),s._v(" "),r("ul",[r("li",[r("strong",[s._v("æ‰©å®¹/ç¼©å®¹")]),s._v("ï¼š"),r("br"),s._v("\næ§½ä½è¿ç§»æœŸé—´ï¼Œé›†ç¾¤é€šè¿‡ "),r("code",[s._v("MOVED")]),s._v("/"),r("code",[s._v("ASK")]),s._v(" æœºåˆ¶ä¿è¯è¯·æ±‚æ­£ç¡®è·¯ç”±ï¼Œå®¢æˆ·ç«¯è‡ªåŠ¨æ„ŸçŸ¥æ–°æ‹“æ‰‘ã€‚")]),s._v(" "),r("li",[r("strong",[s._v("ä¸»èŠ‚ç‚¹æ•…éšœ")]),s._v("ï¼š"),r("br"),s._v("\nä»èŠ‚ç‚¹æ¥æ›¿æ§½ä½åï¼Œé›†ç¾¤é€šè¿‡ Gossip åè®®åŒæ­¥æ–°æ˜ å°„å…³ç³»ï¼Œå®¢æˆ·ç«¯é€šè¿‡é‡å®šå‘æ›´æ–°ç¼“å­˜ã€‚")])]),s._v(" "),r("hr"),s._v(" "),r("h3",{attrs:{id:"ğŸ’¡-ä¸ºä½•æ˜¯-16384-ä¸ªæ§½"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¡-ä¸ºä½•æ˜¯-16384-ä¸ªæ§½"}},[s._v("#")]),s._v(" ğŸ’¡ "),r("strong",[s._v("ä¸ºä½•æ˜¯ 16384 ä¸ªæ§½ï¼Ÿ")])]),s._v(" "),r("ul",[r("li",[r("strong",[s._v("æ¶ˆæ¯æ•ˆç‡")]),s._v("ï¼šé›†ç¾¤å¿ƒè·³åŒ…éœ€æºå¸¦æ§½ä½åˆ†é…ä¿¡æ¯ï¼Œ"),r("code",[s._v("16384")]),s._v(" ä»…éœ€ 2KB ç©ºé—´ï¼Œè€Œ "),r("code",[s._v("65536")]),s._v(" éœ€ 8KBï¼Œæ›´èŠ‚çœç½‘ç»œå¸¦å®½ã€‚")]),s._v(" "),r("li",[r("strong",[s._v("åˆ†å¸ƒå‡è¡¡")]),s._v("ï¼šè¶³å¤Ÿå¤šçš„æ§½æ•°ç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œé¿å…çƒ­ç‚¹é—®é¢˜ã€‚")])]),s._v(" "),r("hr"),s._v(" "),r("h3",{attrs:{id:"âš ï¸-æ³¨æ„äº‹é¡¹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#âš ï¸-æ³¨æ„äº‹é¡¹"}},[s._v("#")]),s._v(" âš ï¸ "),r("strong",[s._v("æ³¨æ„äº‹é¡¹")])]),s._v(" "),r("ol",[r("li",[r("strong",[s._v("é”®å“ˆå¸Œä¼˜åŒ–")]),s._v("ï¼š"),r("br"),s._v("\nä½¿ç”¨å“ˆå¸Œæ ‡ç­¾ï¼ˆå¦‚ "),r("code",[s._v("user:{1001}:profile")]),s._v("ï¼‰å¯å¼ºåˆ¶å¤šä¸ªé”®æ˜ å°„åˆ°åŒä¸€æ§½ä½ï¼Œæ”¯æŒäº‹åŠ¡æ“ä½œã€‚")]),s._v(" "),r("li",[r("strong",[s._v("å®¢æˆ·ç«¯è¦æ±‚")]),s._v("ï¼š"),r("br"),s._v("\néœ€æ”¯æŒæ™ºèƒ½è·¯ç”±ï¼ˆå¦‚ JedisClusterã€Lettuceï¼‰ï¼Œé¿å…é¢‘ç¹é‡å®šå‘é™ä½æ€§èƒ½ã€‚")]),s._v(" "),r("li",[r("strong",[s._v("é›†ç¾¤çŠ¶æ€")]),s._v("ï¼š"),r("br"),s._v("\nè‹¥æ§½ä½æœªå®Œå…¨åˆ†é…ï¼ˆå¦‚èŠ‚ç‚¹å®•æœºï¼‰ï¼Œé›†ç¾¤å¯èƒ½æ‹’ç»è¯·æ±‚ï¼Œéœ€é…ç½® "),r("code",[s._v("cluster-require-full-coverage=no")]),s._v(" é¿å…å…¨å±€ä¸å¯ç”¨ã€‚")])]),s._v(" "),r("hr"),s._v(" "),r("h3",{attrs:{id:"âœ…-æ€»ç»“æµç¨‹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-æ€»ç»“æµç¨‹"}},[s._v("#")]),s._v(" âœ… "),r("strong",[s._v("æ€»ç»“æµç¨‹")])]),s._v(" "),r("div",{staticClass:"language-mermaid line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-mermaid"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("graph")]),s._v(" LR\nA"),r("span",{pre:!0,attrs:{class:"token text string"}},[s._v("[å®¢æˆ·ç«¯å†™å…¥ Key]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[s._v("--\x3e")]),s._v(" B[è®¡ç®— CRC16"),r("span",{pre:!0,attrs:{class:"token text string"}},[s._v("(key)")]),s._v(" % 16384 å¾—åˆ° Slot]\nB "),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[s._v("--\x3e")]),s._v(" C"),r("span",{pre:!0,attrs:{class:"token text string"}},[s._v("[æŸ¥è¯¢æœ¬åœ°æ§½ä½æ˜ å°„è¡¨]")]),s._v("\nC "),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[s._v("--\x3e")]),s._v(" D"),r("span",{pre:!0,attrs:{class:"token text string"}},[s._v("{å½“å‰èŠ‚ç‚¹æ˜¯å¦è´Ÿè´£ Slotï¼Ÿ}")]),s._v("\nD "),r("span",{pre:!0,attrs:{class:"token inter-arrow-label"}},[r("span",{pre:!0,attrs:{class:"token arrow-head arrow operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token label property"}},[s._v("æ˜¯")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[s._v("--\x3e")])]),s._v(" E"),r("span",{pre:!0,attrs:{class:"token text string"}},[s._v("[æ‰§è¡Œå†™å…¥]")]),s._v("\nD "),r("span",{pre:!0,attrs:{class:"token inter-arrow-label"}},[r("span",{pre:!0,attrs:{class:"token arrow-head arrow operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token label property"}},[s._v("å¦")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[s._v("--\x3e")])]),s._v(" F"),r("span",{pre:!0,attrs:{class:"token text string"}},[s._v("[è¿”å› MOVED/ASK é‡å®šå‘]")]),s._v("\nF "),r("span",{pre:!0,attrs:{class:"token arrow operator"}},[s._v("--\x3e")]),s._v(" G"),r("span",{pre:!0,attrs:{class:"token text string"}},[s._v("[å®¢æˆ·ç«¯æ›´æ–°æ˜ å°„è¡¨å¹¶é‡è¯•]")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[s._v("é€šè¿‡å“ˆå¸Œæ§½æœºåˆ¶ï¼ŒRedis é›†ç¾¤å®ç°äº†æ•°æ®åˆ†ç‰‡ã€åŠ¨æ€æ‰©ç¼©å®¹å’Œæ•…éšœè½¬ç§»çš„è‡ªåŠ¨åŒ–ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†æ•°æ®åˆ†å¸ƒã€‚")])])}),[],!1,null,null,null);r.default=v.exports}}]);