(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{458:function(v,_,r){"use strict";r.r(_);var e=r(7),l=Object(e.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("p",[v._v("ISRï¼ˆIn-Sync Replicasï¼‰æ˜¯ Kafka ä¸­ç”¨äºä¿éšœæ•°æ®ä¸€è‡´æ€§ä¸é«˜å¯ç”¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå…¶æ•°é‡åŠ¨æ€å˜åŒ–ä¸”å—å¤šå› ç´ çº¦æŸã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š")]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"ğŸ“Œ-ä¸€ã€isr-çš„å®šä¹‰ä¸ç»„æˆ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-ä¸€ã€isr-çš„å®šä¹‰ä¸ç»„æˆ"}},[v._v("#")]),v._v(" ğŸ“Œ "),_("strong",[v._v("ä¸€ã€ISR çš„å®šä¹‰ä¸ç»„æˆ")])]),v._v(" "),_("ol",[_("li",[_("p",[_("strong",[v._v("æ ¸å¿ƒæ¦‚å¿µ")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("ISRï¼ˆåŒæ­¥å‰¯æœ¬é›†ï¼‰")]),v._v("ï¼šæŒ‡ä¸åˆ†åŒºçš„ Leader å‰¯æœ¬ä¿æŒæ•°æ®åŒæ­¥çš„æ‰€æœ‰å‰¯æœ¬é›†åˆï¼Œ"),_("strong",[v._v("åŒ…å« Leader è‡ªèº«")]),v._v("ã€‚")]),v._v(" "),_("li",[_("strong",[v._v("ARï¼ˆAssigned Replicasï¼‰")]),v._v("ï¼šåˆ†åŒºçš„æ‰€æœ‰å‰¯æœ¬ï¼ˆå« Leader å’Œ Followerï¼‰ã€‚")]),v._v(" "),_("li",[_("strong",[v._v("OSRï¼ˆOut-Sync Replicasï¼‰")]),v._v("ï¼šæ»åäº Leader çš„å‰¯æœ¬é›†åˆã€‚")]),v._v(" "),_("li",[_("strong",[v._v("å…³ç³»å…¬å¼")]),v._v("ï¼š"),_("code",[v._v("AR = ISR + OSR")]),v._v("ã€‚")])])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("åŒæ­¥æ ‡å‡†")])]),v._v(" "),_("ul",[_("li",[v._v("Follower éœ€åœ¨ "),_("code",[v._v("replica.lag.time.max.ms")]),v._v("ï¼ˆé»˜è®¤ 10 ç§’ï¼‰å†…è¿½ä¸Š Leader çš„ LEOï¼ˆLog End Offsetï¼Œæ—¥å¿—æœ«ç«¯ä½ç§»ï¼‰ã€‚")]),v._v(" "),_("li",[v._v("è‹¥ Follower è¶…æ—¶æœªåŒæ­¥ï¼Œä¼šè¢«ç§»å‡º ISR è¿›å…¥ OSRï¼›è¿½å¹³åå¯é‡æ–°åŠ å…¥ã€‚")])])])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"ğŸ”¢-äºŒã€isr-çš„æœ€å¤§æ•°é‡"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¢-äºŒã€isr-çš„æœ€å¤§æ•°é‡"}},[v._v("#")]),v._v(" ğŸ”¢ "),_("strong",[v._v("äºŒã€ISR çš„æœ€å¤§æ•°é‡")])]),v._v(" "),_("ol",[_("li",[_("p",[_("strong",[v._v("ä¸Šé™çº¦æŸ")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("ISR æœ€å¤§æ•°é‡ = åˆ†åŒºçš„å‰¯æœ¬æ•°ï¼ˆReplication Factorï¼‰")]),v._v("ã€‚")]),v._v(" "),_("li",[_("em",[v._v("ç¤ºä¾‹")]),v._v("ï¼šè‹¥æŸåˆ†åŒºé…ç½®å‰¯æœ¬æ•°=3ï¼Œåˆ™ ISR æœ€å¤§ä¸º 3ï¼ˆLeader + 2 Followerï¼‰ã€‚")]),v._v(" "),_("li",[_("strong",[v._v("ä¸å¯è¶…è¶Šå‰¯æœ¬æ•°ä¸Šé™")]),v._v("ï¼šå‰¯æœ¬æ•°å—é™äº Broker æ•°é‡ï¼ˆä¾‹å¦‚ 3 Broker æ—¶å‰¯æœ¬æ•°â‰¤3ï¼‰ã€‚")])])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("åŠ¨æ€å˜åŒ–æ€§")])]),v._v(" "),_("ul",[_("li",[v._v("ISR æ•°é‡å®é™…è¿è¡Œæ—¶å¯èƒ½å°äºå‰¯æœ¬æ•°ï¼ˆå¦‚éƒ¨åˆ† Follower æ»åæˆ–å®•æœºï¼‰ã€‚")]),v._v(" "),_("li",[_("em",[v._v("æç«¯æƒ…å†µ")]),v._v("ï¼šè‹¥æ‰€æœ‰ Follower å‡æ»åï¼ŒISR å¯èƒ½ä»…å‰© Leaderã€‚")])])])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"âš™ï¸-ä¸‰ã€isr-æ•°é‡çš„åŠ¨æ€è°ƒæ•´æœºåˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#âš™ï¸-ä¸‰ã€isr-æ•°é‡çš„åŠ¨æ€è°ƒæ•´æœºåˆ¶"}},[v._v("#")]),v._v(" âš™ï¸ "),_("strong",[v._v("ä¸‰ã€ISR æ•°é‡çš„åŠ¨æ€è°ƒæ•´æœºåˆ¶")])]),v._v(" "),_("ol",[_("li",[_("p",[_("strong",[v._v("Leader ä¸»åŠ¨ç»´æŠ¤")])]),v._v(" "),_("ul",[_("li",[v._v("Leader å‘¨æœŸæ€§æ£€æŸ¥ Follower åŒæ­¥çŠ¶æ€ï¼š\n"),_("ul",[_("li",[v._v("ä½¿ç”¨ "),_("code",[v._v("replica.lag.time.max.ms")]),v._v(" åˆ¤æ–­æ»åé˜ˆå€¼ï¼ˆé»˜è®¤ 10 ç§’ï¼‰ã€‚")]),v._v(" "),_("li",[v._v("è‹¥ Follower è¶…æ—¶æœªæ‹‰å–æ•°æ®ï¼Œç§»å‡º ISRï¼›è¿½å¹³åé‡æ–°åŠ å…¥ã€‚")])])]),v._v(" "),_("li",[v._v("é€šè¿‡ ZooKeeper æŒä¹…åŒ– ISR å˜æ›´è®°å½•ï¼Œå¹¶é€šçŸ¥é›†ç¾¤æ›´æ–°å…ƒæ•°æ®ã€‚")])])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("æ•…éšœåœºæ™¯çš„å½±å“")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("Broker å®•æœº")]),v._v("ï¼šè¯¥ Broker ä¸Šçš„å‰¯æœ¬è‡ªåŠ¨ç§»å‡º ISRã€‚")]),v._v(" "),_("li",[_("strong",[v._v("Leader åˆ‡æ¢")]),v._v("ï¼šæ–° Leader ä»å‰©ä½™ ISR å‰¯æœ¬ä¸­é€‰ä¸¾äº§ç”Ÿï¼Œå¹¶æ¥ç®¡æ•°æ®åŒæ­¥ã€‚")])])])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"âš ï¸-å››ã€å½±å“-isr-æ•°é‡çš„å…³é”®å‚æ•°"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#âš ï¸-å››ã€å½±å“-isr-æ•°é‡çš„å…³é”®å‚æ•°"}},[v._v("#")]),v._v(" âš ï¸ "),_("strong",[v._v("å››ã€å½±å“ ISR æ•°é‡çš„å…³é”®å‚æ•°")])]),v._v(" "),_("ol",[_("li",[_("p",[_("strong",[_("code",[v._v("min.insync.replicas")])])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("ä½œç”¨")]),v._v("ï¼šå®šä¹‰ ISR ä¸­å¿…é¡»ä¿æŒçš„æœ€å°å‰¯æœ¬æ•°ï¼ˆå« Leaderï¼‰ã€‚")]),v._v(" "),_("li",[_("em",[v._v("ç¤ºä¾‹")]),v._v("ï¼šè‹¥è®¾ä¸º 2ï¼Œå½“ ISR æ•°é‡<2 æ—¶ï¼Œç”Ÿäº§è€…å†™å…¥ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç‰ºç‰²å¯ç”¨æ€§ä»¥ä¿æ•°æ®å®‰å…¨ã€‚")]),v._v(" "),_("li",[_("strong",[v._v("å»ºè®®å€¼")]),v._v("ï¼šç”Ÿäº§ç¯å¢ƒé€šå¸¸è®¾ä¸º 2ï¼ˆå‰¯æœ¬æ•°=3 æ—¶ï¼‰ã€‚")])])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("ç”Ÿäº§è€… ACK æœºåˆ¶")])]),v._v(" "),_("ul",[_("li",[_("strong",[_("code",[v._v("acks=all")])]),v._v("ï¼šéœ€ç­‰å¾… ISR æ‰€æœ‰å‰¯æœ¬å†™å…¥æˆåŠŸï¼Œæ­¤æ—¶å®é™…å‚ä¸åŒæ­¥çš„å‰¯æœ¬æ•°=å½“å‰ ISR æ•°é‡ã€‚")]),v._v(" "),_("li",[_("strong",[_("code",[v._v("acks=1")])]),v._v("ï¼šä»…éœ€ Leader å†™å…¥æˆåŠŸï¼Œä¸ ISR æ•°é‡æ— å…³ã€‚")])])])]),v._v(" "),_("hr"),v._v(" "),_("h3",{attrs:{id:"ğŸ’-æ€»ç»“"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-æ€»ç»“"}},[v._v("#")]),v._v(" ğŸ’ "),_("strong",[v._v("æ€»ç»“")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("ISR æ˜¯ä»€ä¹ˆ")]),v._v("ï¼šåŠ¨æ€ç»´æŠ¤çš„åŒæ­¥å‰¯æœ¬é›†ï¼ˆå« Leaderï¼‰ï¼Œä¿éšœæ•°æ®å¯é æ€§ä¸æ•…éšœè½¬ç§»ã€‚")]),v._v(" "),_("li",[_("strong",[v._v("æœ€å¤§æ•°é‡")]),v._v("ï¼šç­‰äºåˆ†åŒºå‰¯æœ¬æ•°ï¼Œå—é™äº Broker è§„æ¨¡ã€‚")]),v._v(" "),_("li",[_("strong",[v._v("æ•°é‡æ¥æº")]),v._v("ï¼šç”± Leader åŸºäºåŒæ­¥çŠ¶æ€ï¼ˆ"),_("code",[v._v("replica.lag.time.max.ms")]),v._v("ï¼‰åŠ¨æ€è°ƒæ•´ï¼Œå¹¶å— "),_("code",[v._v("min.insync.replicas")]),v._v(" å¼ºçº¦æŸã€‚")])]),v._v(" "),_("blockquote",[_("p",[_("strong",[v._v("è®¾è®¡æœ¬è´¨")]),v._v("ï¼šISR æœºåˆ¶åœ¨æ•°æ®ä¸€è‡´æ€§ï¼ˆé«˜å‰¯æœ¬æ•°ï¼‰ä¸ç³»ç»Ÿå¯ç”¨æ€§ï¼ˆä½å‰¯æœ¬æ•°å®¹å¿ï¼‰é—´åŠ¨æ€å¹³è¡¡ï¼Œç”¨æˆ·å¯é€šè¿‡å‚æ•°æŒ‰éœ€é…ç½®ã€‚")])])])}),[],!1,null,null,null);_.default=l.exports}}]);