(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{442:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h5",{attrs:{id:"å‘½ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‘½ä»¤"}},[s._v("#")]),s._v(" å‘½ä»¤")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" zookeeper "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--network")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/zookeeper/conf/zoo.cfg:/conf/zoo.cfg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/zookeeper/data:/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/zookeeper/logs:/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  zookeeper:3.7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("ä»¥ä¸‹æ˜¯åŸºäºä¸‰å°ç‰©ç†æœºï¼ˆIP: "),a("code",[s._v("10.143.143.101")]),s._v("ã€"),a("code",[s._v("10.143.143.102")]),s._v("ã€"),a("code",[s._v("10.143.143.103")]),s._v("ï¼‰é€šè¿‡ Docker æ­å»º ZooKeeper é›†ç¾¤çš„å®Œæ•´æ–¹æ¡ˆï¼Œæ•´åˆå¤šç¯‡å®è·µæŒ‡å—çš„æ ¸å¿ƒæ­¥éª¤ï¼Œå¹¶æä¾›ä¼˜åŒ–å»ºè®®ï¼š")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"ğŸ”§-ä¸€ã€ç¯å¢ƒå‡†å¤‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”§-ä¸€ã€ç¯å¢ƒå‡†å¤‡"}},[s._v("#")]),s._v(" ğŸ”§ "),a("strong",[s._v("ä¸€ã€ç¯å¢ƒå‡†å¤‡")])]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("åŸºç¡€è¦æ±‚")]),s._v(" "),a("ul",[a("li",[s._v("ä¸‰å°ä¸»æœºå‡å·²å®‰è£… Docker å’Œ Docker Composeï¼ˆâ‰¥20.10ï¼‰ã€‚")]),s._v(" "),a("li",[a("strong",[s._v("å¼€æ”¾ç«¯å£")]),s._v("ï¼š\n"),a("ul",[a("li",[a("code",[s._v("2181")]),s._v("ï¼ˆå®¢æˆ·ç«¯è®¿é—®ï¼‰")]),s._v(" "),a("li",[a("code",[s._v("2888")]),s._v("ï¼ˆèŠ‚ç‚¹é—´é€šä¿¡ï¼‰")]),s._v(" "),a("li",[a("code",[s._v("3888")]),s._v("ï¼ˆé€‰ä¸¾ç«¯å£ï¼‰ã€‚")])])]),s._v(" "),a("li",[s._v("ç¡®ä¿ä¸‰å°ä¸»æœºç½‘ç»œäº’é€šï¼ˆç¦ç”¨é˜²ç«å¢™æˆ–é…ç½®ç«¯å£ç™½åå•ï¼‰ã€‚")])])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"ğŸ˜-äºŒã€éƒ¨ç½²-zookeeper-é›†ç¾¤-host-ç½‘ç»œæ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ˜-äºŒã€éƒ¨ç½²-zookeeper-é›†ç¾¤-host-ç½‘ç»œæ¨¡å¼"}},[s._v("#")]),s._v(" ğŸ˜ "),a("strong",[s._v("äºŒã€éƒ¨ç½² ZooKeeper é›†ç¾¤ï¼ˆHost ç½‘ç»œæ¨¡å¼ï¼‰")])]),s._v(" "),a("p",[a("strong",[s._v("æ¨èç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Host æ¨¡å¼")]),s._v("ï¼Œé¿å…å®¹å™¨ç½‘ç»œéš”ç¦»é—®é¢˜ã€‚")]),s._v(" "),a("h4",{attrs:{id:"æ­¥éª¤-1-æ¯å°ä¸»æœºåˆ›å»ºé…ç½®ç›®å½•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-1-æ¯å°ä¸»æœºåˆ›å»ºé…ç½®ç›®å½•"}},[s._v("#")]),s._v(" "),a("strong",[s._v("æ­¥éª¤ 1ï¼šæ¯å°ä¸»æœºåˆ›å»ºé…ç½®ç›®å½•")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸‰å°ä¸»æœºå‡æ‰§è¡Œ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /data/zookeeper/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("conf,data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /data/zookeeper/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" zoo.cfg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/data/myid\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"æ­¥éª¤-2-é…ç½®-zoo-cfg-ä¸‰å°ä¸»æœºç›¸åŒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-2-é…ç½®-zoo-cfg-ä¸‰å°ä¸»æœºç›¸åŒ"}},[s._v("#")]),s._v(" "),a("strong",[s._v("æ­¥éª¤ 2ï¼šé…ç½® zoo.cfgï¼ˆä¸‰å°ä¸»æœºç›¸åŒï¼‰")])]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zoo.cfg å†…å®¹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("tickTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("2000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("initLimit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("syncLimit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("clientPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("2181")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("quorumListenOnAllIPs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true  # å…³é”®ï¼ç¡®ä¿è·¨ä¸»æœºé€šä¿¡")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server.101")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10.143.143.101:2888:3888")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server.102")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10.143.143.102:2888:3888")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server.103")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("10.143.143.103:2888:3888")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"æ­¥éª¤-3-é…ç½®-myid-æ¯å°ä¸»æœºå”¯ä¸€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-3-é…ç½®-myid-æ¯å°ä¸»æœºå”¯ä¸€"}},[s._v("#")]),s._v(" "),a("strong",[s._v("æ­¥éª¤ 3ï¼šé…ç½® myidï¼ˆæ¯å°ä¸»æœºå”¯ä¸€ï¼‰")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("ä¸»æœº 101")]),s._v("ï¼š"),a("code",[s._v("echo 101 > /data/zookeeper/data/myid")])]),s._v(" "),a("li",[a("strong",[s._v("ä¸»æœº 102")]),s._v("ï¼š"),a("code",[s._v("echo 102 > /data/zookeeper/data/myid")])]),s._v(" "),a("li",[a("strong",[s._v("ä¸»æœº 103")]),s._v("ï¼š"),a("code",[s._v("echo 103 > /data/zookeeper/data/myid")])])]),s._v(" "),a("h4",{attrs:{id:"æ­¥éª¤-4-å¯åŠ¨å®¹å™¨-ä¸‰å°ä¸»æœºåˆ†åˆ«æ‰§è¡Œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-4-å¯åŠ¨å®¹å™¨-ä¸‰å°ä¸»æœºåˆ†åˆ«æ‰§è¡Œ"}},[s._v("#")]),s._v(" "),a("strong",[s._v("æ­¥éª¤ 4ï¼šå¯åŠ¨å®¹å™¨ï¼ˆä¸‰å°ä¸»æœºåˆ†åˆ«æ‰§è¡Œï¼‰")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" zookeeper "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--network")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨ä¸»æœºç½‘ç»œ")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /data/zookeeper/conf/zoo.cfg:/conf/zoo.cfg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /data/zookeeper/data:/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  zookeeper:3.7  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ¨èç¨³å®šç‰ˆæœ¬")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("blockquote",[a("p",[s._v("âœ… "),a("strong",[s._v("å…³é”®ç‚¹")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("--network host")]),s._v(" ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œæ ˆï¼Œé¿å…ç«¯å£æ˜ å°„é—®é¢˜ã€‚")]),s._v(" "),a("li",[a("code",[s._v("quorumListenOnAllIPs=true")]),s._v(" ç¡®ä¿è·¨èŠ‚ç‚¹é€šä¿¡æ­£å¸¸ã€‚")])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"ğŸŒ-ä¸‰ã€å¤‡é€‰æ–¹æ¡ˆ-è‡ªå®šä¹‰-docker-ç½‘ç»œæ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ-ä¸‰ã€å¤‡é€‰æ–¹æ¡ˆ-è‡ªå®šä¹‰-docker-ç½‘ç»œæ¨¡å¼"}},[s._v("#")]),s._v(" ğŸŒ "),a("strong",[s._v("ä¸‰ã€å¤‡é€‰æ–¹æ¡ˆï¼šè‡ªå®šä¹‰ Docker ç½‘ç»œæ¨¡å¼")])]),s._v(" "),a("p",[a("strong",[s._v("é€‚ç”¨åœºæ™¯")]),s._v("ï¼šå•æœºå¤šèŠ‚ç‚¹æµ‹è¯•ï¼ˆéœ€é¿å…ç«¯å£å†²çªï¼‰ã€‚")]),s._v(" "),a("h4",{attrs:{id:"æ­¥éª¤-1-åˆ›å»ºå…±äº«ç½‘ç»œ-ä»»ä¸€ä¸»æœºæ‰§è¡Œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-1-åˆ›å»ºå…±äº«ç½‘ç»œ-ä»»ä¸€ä¸»æœºæ‰§è¡Œ"}},[s._v("#")]),s._v(" "),a("strong",[s._v("æ­¥éª¤ 1ï¼šåˆ›å»ºå…±äº«ç½‘ç»œ")]),s._v("ï¼ˆä»»ä¸€ä¸»æœºæ‰§è¡Œï¼‰")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--subnet")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".0.0/24 zk-net\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"æ­¥éª¤-2-ç¼–å†™-docker-compose-yml-ä¸‰å°ä¸»æœºé…ç½®ä¸åŒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-2-ç¼–å†™-docker-compose-yml-ä¸‰å°ä¸»æœºé…ç½®ä¸åŒ"}},[s._v("#")]),s._v(" "),a("strong",[s._v("æ­¥éª¤ 2ï¼šç¼–å†™ docker-compose.ymlï¼ˆä¸‰å°ä¸»æœºé…ç½®ä¸åŒï¼‰")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸»æœº 101 çš„é…ç½®ï¼ˆå…¶ä»–ä¸»æœºä¿®æ”¹ IP å’Œ broker.idï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.7'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zoo101")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" zookeeper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.7")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" zoo101\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("networks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zk-net")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ipv4_address")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10.10.0.101  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å›ºå®š IP")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /data/zookeeper/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ZOO_MY_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ZOO_SERVERS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server.101=10.10.0.101:2888:3888;server.102=10.10.0.102:2888:3888;server.103=10.10.0.103:2888:3888"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("networks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zk-net")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("external")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("blockquote",[a("p",[s._v("âš ï¸ "),a("strong",[s._v("æ³¨æ„")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("éœ€åœ¨ä¸‰å°ä¸»æœºåˆ†åˆ«é…ç½®ä¸åŒçš„ "),a("code",[s._v("ZOO_MY_ID")]),s._v(" å’Œå®¹å™¨ IPï¼ˆå¦‚ä¸»æœº 102 ç”¨ "),a("code",[s._v("102")]),s._v(" å’Œ "),a("code",[s._v("10.10.0.102")]),s._v("ï¼‰ã€‚")]),s._v(" "),a("li",[s._v("ç”Ÿäº§ç¯å¢ƒä¸æ¨èæ­¤æ¨¡å¼ï¼Œå› è·¨ä¸»æœºç½‘ç»œéœ€é¢å¤–é…ç½®ï¼ˆå¦‚ overlay ç½‘ç»œï¼‰ã€‚")])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"âœ…-å››ã€é›†ç¾¤éªŒè¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#âœ…-å››ã€é›†ç¾¤éªŒè¯"}},[s._v("#")]),s._v(" âœ… "),a("strong",[s._v("å››ã€é›†ç¾¤éªŒè¯")])]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€")]),s._v("ï¼ˆä»»é€‰ä¸€å°ä¸»æœºï¼‰")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" zookeeper zkServer.sh status\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("è¾“å‡ºç¤ºä¾‹")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Mode: leader")]),s._v("ï¼ˆä¸»èŠ‚ç‚¹ï¼‰")]),s._v(" "),a("li",[a("code",[s._v("Mode: follower")]),s._v("ï¼ˆä»èŠ‚ç‚¹ï¼‰")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("æµ‹è¯•å®¢æˆ·ç«¯è¿æ¥")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.143")]),s._v(".143.101 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"âš™ï¸-äº”ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–å»ºè®®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#âš™ï¸-äº”ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–å»ºè®®"}},[s._v("#")]),s._v(" âš™ï¸ "),a("strong",[s._v("äº”ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–å»ºè®®")])]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("æ•°æ®æŒä¹…åŒ–")]),s._v("ï¼š\n"),a("ul",[a("li",[s._v("æŒ‚è½½å®¿ä¸»æœºç›®å½•ï¼š"),a("code",[s._v("-v /data/zookeeper/data:/data")]),s._v("ã€‚")])])]),s._v(" "),a("li",[a("strong",[s._v("èµ„æºé™åˆ¶")]),s._v("ï¼š\n"),a("ul",[a("li",[s._v("é™åˆ¶å®¹å™¨å†…å­˜ï¼š"),a("code",[s._v("--memory 1g --cpus 1")]),s._v("ã€‚")])])]),s._v(" "),a("li",[a("strong",[s._v("æ—¥å¿—ç®¡ç†")]),s._v("ï¼š\n"),a("ul",[a("li",[s._v("æŒ‚è½½æ—¥å¿—ç›®å½•ï¼š"),a("code",[s._v("-v /data/zookeeper/logs:/logs")]),s._v("ã€‚")])])]),s._v(" "),a("li",[a("strong",[s._v("é«˜å¯ç”¨é…ç½®")]),s._v("ï¼š\n"),a("ul",[a("li",[s._v("ç¡®ä¿ "),a("code",[s._v("replication-factor >= 3")]),s._v("ï¼ˆå®¹å¿å•èŠ‚ç‚¹æ•…éšœï¼‰ã€‚")])])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"âš ï¸-å…­ã€å¸¸è§é—®é¢˜è§£å†³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#âš ï¸-å…­ã€å¸¸è§é—®é¢˜è§£å†³"}},[s._v("#")]),s._v(" âš ï¸ "),a("strong",[s._v("å…­ã€å¸¸è§é—®é¢˜è§£å†³")])]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("èŠ‚ç‚¹æ— æ³•é€‰ä¸¾ Leader")]),s._v(" "),a("ul",[a("li",[s._v("æ£€æŸ¥ "),a("code",[s._v("myid")]),s._v(" æ–‡ä»¶æ˜¯å¦å”¯ä¸€ä¸”ä¸ "),a("code",[s._v("server.x")]),s._v(" çš„ ID åŒ¹é…ã€‚")]),s._v(" "),a("li",[s._v("ç¡®è®¤é˜²ç«å¢™å¼€æ”¾ "),a("code",[s._v("2888")]),s._v("/"),a("code",[s._v("3888")]),s._v(" ç«¯å£ã€‚")])])]),s._v(" "),a("li",[a("strong",[s._v("å®¹å™¨è·¨ä¸»æœºæ— æ³•é€šä¿¡")]),s._v(" "),a("ul",[a("li",[s._v("Host æ¨¡å¼ï¼šç¡®ä¿å®¿ä¸»æœº IP é…ç½®æ­£ç¡®ï¼ˆç¦ç”¨ "),a("code",[s._v("localhost")]),s._v("ï¼‰ã€‚")]),s._v(" "),a("li",[s._v("è‡ªå®šä¹‰ç½‘ç»œï¼šæ£€æŸ¥ Docker è·¨ä¸»æœºç½‘ç»œé…ç½®ï¼ˆå¦‚ Calicoï¼‰ã€‚")])])]),s._v(" "),a("li",[a("strong",[s._v("å¯åŠ¨å¤±è´¥")]),s._v(" "),a("ul",[a("li",[s._v("æŸ¥çœ‹æ—¥å¿—ï¼š"),a("code",[s._v("docker logs zookeeper")]),s._v("ï¼Œé‡ç‚¹æ£€æŸ¥ "),a("code",[s._v("zoo.cfg")]),s._v(" è¯­æ³•å’Œ IP é”™è¯¯ã€‚")])])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"ğŸ’-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-æ€»ç»“"}},[s._v("#")]),s._v(" ğŸ’ "),a("strong",[s._v("æ€»ç»“")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[s._v("æ–¹æ¡ˆ")])]),s._v(" "),a("th",[a("strong",[s._v("é€‚ç”¨åœºæ™¯")])]),s._v(" "),a("th",[a("strong",[s._v("å…³é”®é…ç½®")])])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[s._v("Host ç½‘ç»œ")])]),s._v(" "),a("td",[s._v("ç”Ÿäº§ç¯å¢ƒï¼ˆå¤šä¸»æœºï¼‰")]),s._v(" "),a("td",[a("code",[s._v("--network host")]),s._v(" + å®¿ä¸»æœº IP ç»‘å®š")])]),s._v(" "),a("tr",[a("td",[a("strong",[s._v("è‡ªå®šä¹‰ç½‘ç»œ")])]),s._v(" "),a("td",[s._v("æµ‹è¯•ç¯å¢ƒï¼ˆå•ä¸»æœºï¼‰")]),s._v(" "),a("td",[s._v("å›ºå®šå®¹å™¨ IP + è·¨ä¸»æœºç½‘ç»œæ’ä»¶")])])])]),s._v(" "),a("p",[a("strong",[s._v("æ¨èé€‰æ‹©")]),s._v("ï¼šä¸‰å°ç‰©ç†æœºéƒ¨ç½²"),a("strong",[s._v("ä¼˜å…ˆé‡‡ç”¨ Host ç½‘ç»œæ¨¡å¼")]),s._v("ï¼Œé…ç½®ç®€å•ä¸”æ€§èƒ½æ¥è¿‘åŸç”Ÿã€‚è‹¥éœ€è¿›ä¸€æ­¥ç®€åŒ–è¿ç»´ï¼Œå¯ç»“åˆ Docker Compose æ‰¹é‡ç®¡ç†ã€‚")])])}),[],!1,null,null,null);a.default=n.exports}}]);