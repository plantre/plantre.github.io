(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{525:function(a,s,t){"use strict";t.r(s);var r=t(7),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("在Linux系统中使用"),s("code",[a._v("nohup")]),a._v("启动JAR包并保存日志到文件，可通过以下步骤实现：")]),a._v(" "),s("hr"),a._v(" "),s("p",[s("strong",[a._v("一、基础命令")]),a._v(" "),s("strong",[a._v("1. 标准输出与错误输出合并到单一文件")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" your_app.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /path/to/logs/app.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("• "),s("code",[a._v("nohup")]),a._v("：使进程在后台持续运行，即使关闭终端也不会中断。")]),a._v(" "),s("p",[a._v("• "),s("code",[a._v("> /path/to/logs/app.log")]),a._v("：将标准输出（正常日志）重定向到指定文件。")]),a._v(" "),s("p",[a._v("• "),s("code",[a._v("2>&1")]),a._v("：将标准错误输出重定向到标准输出，实现错误日志与正常日志合并存储。")]),a._v(" "),s("p",[a._v("• "),s("code",[a._v("&")]),a._v("：后台运行进程。")]),a._v(" "),s("p",[s("strong",[a._v("2. 仅输出错误日志")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" your_app.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /dev/null "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v("/path/to/logs/error.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("• "),s("code",[a._v("> /dev/null")]),a._v("：丢弃标准输出（适用于仅需记录错误信息的场景）。")]),a._v(" "),s("p",[a._v("• "),s("code",[a._v("2> /path/to/logs/error.log")]),a._v("：将错误日志单独保存到指定文件。")]),a._v(" "),s("hr"),a._v(" "),s("p",[s("strong",[a._v("二、进阶配置")]),a._v(" "),s("strong",[a._v("1. 按日期分割日志文件")]),a._v("\n通过"),s("code",[a._v("date")]),a._v("命令动态生成日志文件名，实现按日存储：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" your_app.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /path/to/logs/"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"%Y-%m-%d"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(".log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("• "),s("code",[a._v('$(date +"%Y-%m-%d")')]),a._v("：生成当前日期字符串（如"),s("code",[a._v("2025-05-04.log")]),a._v("）。")]),a._v(" "),s("p",[a._v("• 注意：需确保目标目录已存在，否则需手动创建或通过脚本处理。")]),a._v(" "),s("p",[s("strong",[a._v("2. 使用"),s("code",[a._v("cronolog")]),a._v("实现日志轮转")]),a._v("\n安装"),s("code",[a._v("cronolog")]),a._v("工具后，可按日/月分割日志：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" your_app.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" /usr/sbin/cronolog /path/to/logs/%Y-%m-%d.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("• "),s("code",[a._v("%Y-%m-%d")]),a._v("：自动生成日期格式的日志文件（如"),s("code",[a._v("2025-05-04.log")]),a._v("）。")]),a._v(" "),s("hr"),a._v(" "),s("p",[s("strong",[a._v("三、验证与维护")]),a._v(" "),s("strong",[a._v("1. 查看实时日志")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" /path/to/logs/app.log  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 实时跟踪日志更新")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("2. 检查进程状态")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ef")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看Java进程是否运行")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("3. 停止进程")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-9")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("PID"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过进程ID终止服务")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("hr"),a._v(" "),s("p",[s("strong",[a._v("四、脚本化启动（推荐）")]),a._v("\n创建启动脚本"),s("code",[a._v("start.sh")]),a._v("，便于重复使用：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("APP_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/app\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LOG_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$APP_HOME")]),a._v("/logs\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LOG_DIR")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$APP_HOME")]),a._v("/your_app.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LOG_DIR")]),a._v("/app_"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"%Y%m%d"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(".log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"应用已启动，日志路径：'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LOG_DIR")]),a._v("/app_"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"%Y%m%d"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('.log"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("• 赋予执行权限："),s("code",[a._v("chmod +x start.sh")]),a._v("。")]),a._v(" "),s("p",[a._v("• 运行脚本："),s("code",[a._v("./start.sh")]),a._v("。")]),a._v(" "),s("hr"),a._v(" "),s("p",[s("strong",[a._v("五、注意事项")])]),a._v(" "),s("ol",[s("li",[a._v("路径权限：确保日志目录具有写入权限，否则会因权限不足导致启动失败。")]),a._v(" "),s("li",[a._v("日志文件大小：长期运行需定期清理或配置日志轮转（如"),s("code",[a._v("logrotate")]),a._v("工具）。")]),a._v(" "),s("li",[a._v("JVM参数优化：根据需求调整内存参数（如"),s("code",[a._v("-Xms")]),a._v("、"),s("code",[a._v("-Xmx")]),a._v("），避免内存溢出。")])]),a._v(" "),s("hr"),a._v(" "),s("p",[s("strong",[a._v("最佳实践")]),a._v("\n• 推荐配置：合并标准输出与错误日志，便于统一排查问题。")]),a._v(" "),s("p",[a._v("• 日志保留策略：结合"),s("code",[a._v("cron")]),a._v("定时任务或日志管理工具（如"),s("code",[a._v("logrotate")]),a._v("）定期归档旧日志。")]),a._v(" "),s("p",[a._v("通过以上方法，可高效管理后台运行的JAR服务并保存日志，满足生产环境需求。")])])}),[],!1,null,null,null);s.default=e.exports}}]);