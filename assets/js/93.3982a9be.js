(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{450:function(r,e,v){"use strict";v.r(e);var _=v(7),l=Object(_.a)({},(function(){var r=this,e=r._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("p",[r._v("Kafka çš„åˆ†åŒºç¡®å®é‡‡ç”¨äº†ç±»ä¼¼ä¸»ä»èŠ‚ç‚¹çš„è®¾è®¡æœºåˆ¶ï¼Œä½†å…¶æ ¸å¿ƒé€»è¾‘ä¸ä¼ ç»Ÿçš„ä¸»ä»æ¶æ„ä¸åŒï¼š"),e("strong",[r._v("ä¸»ä»å…³ç³»æ˜¯ä»¥åˆ†åŒºä¸ºç²’åº¦ï¼Œè€Œéæ•´ä¸ªé›†ç¾¤æˆ– Broker èŠ‚ç‚¹")]),r._v("ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š")]),r._v(" "),e("h3",{attrs:{id:"ğŸ“Œ-1-ä¸»å‰¯èŠ‚ç‚¹çš„æœ¬è´¨-leader-follower-æ¨¡å¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Œ-1-ä¸»å‰¯èŠ‚ç‚¹çš„æœ¬è´¨-leader-follower-æ¨¡å¼"}},[r._v("#")]),r._v(" ğŸ“Œ 1. "),e("strong",[r._v("ä¸»å‰¯èŠ‚ç‚¹çš„æœ¬è´¨ï¼ˆLeader-Follower æ¨¡å¼ï¼‰")])]),r._v(" "),e("ul",[e("li",[e("strong",[r._v("æ¯ä¸ªåˆ†åŒºï¼ˆPartitionï¼‰ç‹¬ç«‹é€‰ä¸¾ Leader")]),e("br"),r._v("\nKafka çš„ Topic è¢«åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºæœ‰å¤šä¸ªå‰¯æœ¬ï¼ˆReplicaï¼‰ï¼Œå‰¯æœ¬åˆ†å¸ƒåœ¨ä¸åŒçš„ Broker ä¸Šã€‚å…¶ä¸­ï¼š\n"),e("ul",[e("li",[e("strong",[r._v("Leader å‰¯æœ¬")]),r._v("ï¼šè´Ÿè´£å¤„ç†è¯¥åˆ†åŒºçš„æ‰€æœ‰è¯»å†™è¯·æ±‚ï¼ˆç”Ÿäº§è€…çš„å†™å…¥å’Œæ¶ˆè´¹è€…çš„è¯»å–ï¼‰ã€‚")]),r._v(" "),e("li",[e("strong",[r._v("Follower å‰¯æœ¬")]),r._v("ï¼šä»…ä» Leader åŒæ­¥æ•°æ®ï¼Œä¸å¯¹å¤–æä¾›æœåŠ¡ã€‚")])])]),r._v(" "),e("li",[e("strong",[r._v("Broker èŠ‚ç‚¹è§’è‰²åŠ¨æ€å˜åŒ–")]),e("br"),r._v("\nåŒä¸€ Broker å¯èƒ½åŒæ—¶æ˜¯æŸäº›åˆ†åŒºçš„ Leader å’Œå¦ä¸€äº›åˆ†åŒºçš„ Followerï¼Œä¾‹å¦‚ï¼š\n"),e("ul",[e("li",[r._v("Broker 1 æ˜¯ Topic A åˆ†åŒº 1 çš„ Leaderï¼Œä½†å¯èƒ½æ˜¯ Topic B åˆ†åŒº 2 çš„ Followerã€‚")]),r._v(" "),e("li",[r._v("è¿™ç§è®¾è®¡é¿å…äº†ä¼ ç»Ÿä¸»ä»æ¶æ„ä¸­â€œä¸»èŠ‚ç‚¹å•ç‚¹ç“¶é¢ˆâ€é—®é¢˜ã€‚")])])])]),r._v(" "),e("h3",{attrs:{id:"âš¡-2-ä¸»èŠ‚ç‚¹é€‰ä¸¾ä¸æ•…éšœåˆ‡æ¢"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#âš¡-2-ä¸»èŠ‚ç‚¹é€‰ä¸¾ä¸æ•…éšœåˆ‡æ¢"}},[r._v("#")]),r._v(" âš¡ 2. "),e("strong",[r._v("ä¸»èŠ‚ç‚¹é€‰ä¸¾ä¸æ•…éšœåˆ‡æ¢")])]),r._v(" "),e("ul",[e("li",[e("strong",[r._v("é€‰ä¸¾èŒƒå›´")]),r._v("ï¼šå½“ Leader å‰¯æœ¬å¤±æ•ˆï¼ˆå¦‚ Broker å®•æœºï¼‰ï¼Œä¼šä»è¯¥åˆ†åŒºçš„ "),e("strong",[r._v("ISRï¼ˆIn-Sync Replicasï¼‰")]),r._v(" åˆ—è¡¨ä¸­é€‰æ‹©æ–°çš„ Leaderã€‚\n"),e("ul",[e("li",[e("strong",[r._v("ISR å®šä¹‰")]),r._v("ï¼šä¸ Leader æ•°æ®åŒæ­¥å»¶è¿Ÿåœ¨é˜ˆå€¼å†…ï¼ˆ"),e("code",[r._v("replica.lag.time.max.ms")]),r._v("ï¼‰çš„ Follower å‰¯æœ¬ã€‚")])])]),r._v(" "),e("li",[e("strong",[r._v("å®¹é”™ç­–ç•¥")]),r._v("ï¼š\n"),e("ul",[e("li",[r._v("è‹¥ ISR ä¸ºç©ºï¼ˆæ‰€æœ‰ Follower å‡ä¸åŒæ­¥ï¼‰ï¼Œä¸”é…ç½® "),e("code",[r._v("unclean.leader.election.enable=false")]),r._v("ï¼Œåˆ†åŒºå°†ä¸å¯ç”¨ï¼ˆé¿å…æ•°æ®ä¸¢å¤±ï¼‰ã€‚")]),r._v(" "),e("li",[r._v("è‹¥é…ç½®ä¸º "),e("code",[r._v("true")]),r._v("ï¼Œåˆ™ä»éåŒæ­¥å‰¯æœ¬é€‰ä¸¾ï¼Œå¯èƒ½ä¸¢å¤±æœªåŒæ­¥çš„æ¶ˆæ¯ã€‚")])])])]),r._v(" "),e("h3",{attrs:{id:"ğŸ”„-3-æ•°æ®åŒæ­¥æœºåˆ¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”„-3-æ•°æ®åŒæ­¥æœºåˆ¶"}},[r._v("#")]),r._v(" ğŸ”„ 3. "),e("strong",[r._v("æ•°æ®åŒæ­¥æœºåˆ¶")])]),r._v(" "),e("ul",[e("li",[e("strong",[r._v("Follower æ‹‰å–æ•°æ®")]),r._v("ï¼šFollower å®šæœŸä» Leader æ‹‰å–æ¶ˆæ¯ï¼ˆç±»ä¼¼æ¶ˆè´¹è€…ï¼‰ï¼Œå†™å…¥æœ¬åœ°æ—¥å¿—ã€‚")]),r._v(" "),e("li",[e("strong",[r._v("æäº¤æ¡ä»¶")]),r._v("ï¼šç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯éœ€è¢« Leader å’Œæ‰€æœ‰ ISR å‰¯æœ¬å†™å…¥ï¼Œæ‰è§†ä¸ºâ€œå·²æäº¤â€ï¼ˆCommittedï¼‰ï¼Œæ­¤æ—¶æ¶ˆè´¹è€…å¯è§ã€‚")]),r._v(" "),e("li",[e("strong",[r._v("HWï¼ˆé«˜æ°´ä½ï¼‰")]),r._v("ï¼šå®šä¹‰æ¶ˆè´¹è€…å¯è¯»å–çš„æœ€å¤§åç§»é‡ï¼ˆOffsetï¼‰ï¼Œå– ISR ä¸­å‰¯æœ¬çš„æœ€å°åŒæ­¥ä½ç½®ã€‚")])]),r._v(" "),e("h3",{attrs:{id:"ğŸ’¡-4-è®¾è®¡ä¼˜åŠ¿"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¡-4-è®¾è®¡ä¼˜åŠ¿"}},[r._v("#")]),r._v(" ğŸ’¡ 4. "),e("strong",[r._v("è®¾è®¡ä¼˜åŠ¿")])]),r._v(" "),e("ul",[e("li",[e("strong",[r._v("è´Ÿè½½å‡è¡¡")]),r._v("ï¼šè¯»å†™å‹åŠ›åˆ†æ•£åˆ°å¤šä¸ª Brokerï¼ˆä¸åŒåˆ†åŒºçš„ Leader åˆ†å¸ƒä¸åŒï¼‰ã€‚")]),r._v(" "),e("li",[e("strong",[r._v("é«˜å¯ç”¨")]),r._v("ï¼šå•ç‚¹æ•…éšœä»…å½±å“éƒ¨åˆ†åˆ†åŒºï¼Œä¸”å¯å¿«é€Ÿåˆ‡æ¢ Leaderã€‚")]),r._v(" "),e("li",[e("strong",[r._v("æ‰©å±•æ€§")]),r._v("ï¼šå¢åŠ åˆ†åŒºæˆ– Broker å¯æ¨ªå‘æå‡ååé‡ã€‚")])]),r._v(" "),e("h3",{attrs:{id:"âš ï¸-æ³¨æ„äº‹é¡¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#âš ï¸-æ³¨æ„äº‹é¡¹"}},[r._v("#")]),r._v(" âš ï¸ æ³¨æ„äº‹é¡¹")]),r._v(" "),e("ul",[e("li",[e("strong",[r._v("é…ç½®å»ºè®®")]),r._v("ï¼š\n"),e("ul",[e("li",[r._v("è®¾ç½® "),e("code",[r._v("replication.factor â‰¥ 3")]),r._v("ï¼Œç¡®ä¿æ¯ä¸ªåˆ†åŒºæœ‰è¶³å¤Ÿå‰¯æœ¬ã€‚")]),r._v(" "),e("li",[r._v("å…³é—­ "),e("code",[r._v("unclean.leader.election.enable")]),r._v("ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œä¼˜å…ˆä¿éšœæ•°æ®ä¸€è‡´æ€§ã€‚")])])]),r._v(" "),e("li",[e("strong",[r._v("ç›‘æ§ ISR")]),r._v("ï¼šè‹¥ Follower é¢‘ç¹è¢«è¸¢å‡º ISRï¼Œéœ€æ£€æŸ¥ç½‘ç»œæˆ–ç£ç›˜æ€§èƒ½ã€‚")])]),r._v(" "),e("blockquote",[e("p",[r._v("âœ… "),e("strong",[r._v("æ€»ç»“")]),r._v("ï¼šKafka çš„â€œä¸»å‰¯èŠ‚ç‚¹â€å®åˆ™æ˜¯ "),e("strong",[r._v("åˆ†åŒºçº§åˆ«çš„ Leader-Follower å‰¯æœ¬å…³ç³»")]),r._v("ï¼Œé€šè¿‡åŠ¨æ€ç»´æŠ¤ ISR å’Œ Leader é€‰ä¸¾ï¼Œåœ¨ä¿éšœé«˜å¯ç”¨çš„åŒæ—¶å®ç°åˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡ã€‚ä¸ä¼ ç»Ÿä¸»ä»æ¶æ„ä¸åŒï¼Œå…¶è®¾è®¡æ›´è´´åˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼¹æ€§éœ€æ±‚ã€‚")])])])}),[],!1,null,null,null);e.default=l.exports}}]);