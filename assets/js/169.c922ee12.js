(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{526:function(s,a,e){"use strict";e.r(a);var t=e(7),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("以下是 Linux 系统中添加 SSH 公钥的完整操作指南，综合多个权威文档和实践案例整理而成：")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("一、"),a("strong",[s._v("生成 SSH 密钥对")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("生成密钥对"),a("br"),s._v("\n在本地终端执行以下命令生成 RSA 密钥对（推荐 4096 位长度以提高安全性）：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" rsa "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your_email@example.com"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("• "),a("code",[s._v("-t rsa")]),s._v("：指定密钥类型为 RSA。")]),s._v(" "),a("p",[s._v("• "),a("code",[s._v("-b 4096")]),s._v("：设置密钥长度为 4096 位。")]),s._v(" "),a("p",[s._v("• "),a("code",[s._v("-C")]),s._v("：添加注释（通常为邮箱，用于标识密钥用途）。")]),s._v(" "),a("p",[s._v("按提示选择密钥保存路径（默认 "),a("code",[s._v("~/.ssh/id_rsa")]),s._v("），建议设置密码短语（可选但推荐）。")])]),s._v(" "),a("li",[a("p",[s._v("查看公钥内容"),a("br"),s._v("\n生成完成后，查看公钥文件 "),a("code",[s._v("id_rsa.pub")]),s._v(" 的内容：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.ssh/id_rsa.pub\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("二、"),a("strong",[s._v("将公钥添加到远程服务器")]),s._v(" "),a("strong",[s._v("方法 1：使用 "),a("code",[s._v("ssh-copy-id")]),s._v(" 工具（推荐）")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ssh-copy-id "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/id_rsa.pub user@remote_host\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("• "),a("code",[s._v("user@remote_host")]),s._v("：替换为远程服务器的用户名和 IP/域名。")]),s._v(" "),a("p",[s._v("• 此命令会自动将公钥追加到远程服务器的 "),a("code",[s._v("~/.ssh/authorized_keys")]),s._v(" 文件中。")]),s._v(" "),a("p",[a("strong",[s._v("方法 2：手动添加")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("登录远程服务器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" user@remote_host\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("创建或更新 "),a("code",[s._v("authorized_keys")]),s._v(" 文件"),a("br"),s._v("\n确保 "),a("code",[s._v(".ssh")]),s._v(" 目录存在并设置权限：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" ~/.ssh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("700")]),s._v(" ~/.ssh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("将本地公钥内容追加到远程服务器的 "),a("code",[s._v("authorized_keys")]),s._v(" 文件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"公钥内容"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" ~/.ssh/authorized_keys\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("三、"),a("strong",[s._v("验证权限配置")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("本地验证"),a("br"),s._v("\n尝试通过 SSH 密钥登录服务器：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/id_rsa user@remote_host\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("若无需输入密码即可登录，说明公钥已生效。")])]),s._v(" "),a("li",[a("p",[s._v("服务器端检查"),a("br"),s._v("\n确保以下权限设置正确：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("700")]),s._v(" ~/.ssh            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 目录权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" ~/.ssh/authorized_keys  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("四、"),a("strong",[s._v("高级配置（可选）")])]),s._v(" "),a("ol",[a("li",[s._v("多密钥管理\n若需为不同服务器使用不同密钥，生成时指定文件名：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" rsa "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" ~/.ssh/server1_rsa\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("连接时通过 "),a("code",[s._v("-i")]),s._v(" 指定私钥：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ~/.ssh/server1_rsa user@server1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("禁用密码登录（提升安全性）\n编辑远程服务器的 SSH 配置文件：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/ssh/sshd_config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改以下参数：")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[s._v("PasswordAuthentication no\nChallengeResponseAuthentication no\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("重启 SSH 服务：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart sshd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("p",[s._v("五、"),a("strong",[s._v("常见问题排查")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("连接被拒绝"),a("br"),s._v("\n• 检查远程 SSH 服务是否运行："),a("code",[s._v("sudo systemctl status sshd")]),s._v("。")]),s._v(" "),a("p",[s._v("• 确认防火墙开放 SSH 端口（默认 22）。")])]),s._v(" "),a("li",[a("p",[s._v("密钥认证失败"),a("br"),s._v("\n• 确保公钥内容无空格或格式错误。")]),s._v(" "),a("p",[s._v("• 检查本地私钥路径是否正确。")])])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("通过以上步骤，您可高效完成 Linux 系统的 SSH 公钥配置。如需更详细的参数说明，可参考 "),a("a",{attrs:{href:"https://www.openssh.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("OpenSSH 官方文档"),a("OutboundLink")],1),s._v("。")])])}),[],!1,null,null,null);a.default=r.exports}}]);